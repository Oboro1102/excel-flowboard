const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/LayoutLogin-Dhal6UtT.js","assets/index-iuVyTblz.js","assets/index-Dc7awLi2.css"])))=>i.map(i=>d[i]);
import{r as e,t}from"./floatlabel-WHqg0b3B.js";import{n,r,t as i}from"./api-De0_bhtb.js";import{B as a,Dt as o,J as s,Lt as c,Ut as l,W as u,X as d,Y as f,a as p,et as m,gt as h,m as g,nt as _,q as v,qt as y,rt as b,t as x,tt as S}from"./index-iuVyTblz.js";import{n as C}from"./commonFunction-BGdAfl6M.js";import{t as w}from"./stores-CLfBIYty.js";import{t as T}from"./LoadingArea-C_CQBe-b.js";var E={for:`username`,class:`form__label form__label--whitMessage`},D={for:`password`,class:`form__label form__label--whitMessage`},O={class:`flex items-center justify-end`},k=b({__name:`LoginView`,setup(b){let k=_({loader:()=>x(()=>import(`./LayoutLogin-Dhal6UtT.js`),__vite__mapDeps([0,1,2])),loadingComponent:T}),A=g(),j=a(),M=c({account:`odt123`,password:`1q2w3e4r`}),N=v(()=>M.value.password.length<1||M.value.account.length<1),P=c(!1),F=e=>({account:[M.value.account.length<1?`請輸入帳號`:``].join(` `).trim(),password:[M.value.password.length<1?`請輸入密碼`:``].join(` `).trim()})[e],I=w(),L=c(!1),R=async()=>{if(N.value){P.value=!0;return}else P.value=!1;try{L.value=!0;let{data:e}=(await i.AUTH.POST_LOGIN(M.value)).data,t=crypto.randomUUID();return sessionStorage.setItem(`z2y8x4w6v1u9`,t),sessionStorage.setItem(`a7b3c9d1e5f8`,C(e,t)),I.updateUser(),L.value=!1,j.push({name:`Index`})}catch(e){let{response:t}=e;A.add({severity:`error`,summary:`登入異常`,detail:t.data.message,life:3e3}),L.value=!1}};return(i,a)=>(h(),f(l(k),null,{form:o(()=>[s(`form`,{class:`wrap--gap flex flex-col`,onSubmit:u(R,[`prevent`])},[S(l(t),{variant:`on`},{default:o(()=>[S(l(e),{id:`username`,fluid:``,autocomplete:`true`,invalid:P.value&&F(`account`).length>0,modelValue:M.value.account,"onUpdate:modelValue":a[0]||=e=>M.value.account=e},null,8,[`invalid`,`modelValue`]),s(`label`,E,[a[3]||=s(`i`,{class:`bi bi-person`},null,-1),a[4]||=s(`span`,null,`帳號`,-1),P.value&&F(`account`).length>0?(h(),f(l(r),{key:0,severity:`error`,variant:`simple`,size:`small`,pt:{text:{class:`!text-[0.625rem]`}}},{default:o(()=>[m(y(F(`account`)),1)]),_:1})):d(``,!0)])]),_:1}),S(l(t),{variant:`on`},{default:o(()=>[S(l(n),{inputId:`password`,fluid:``,feedback:!1,toggleMask:``,inputProps:{autocomplete:`false`},invalid:P.value&&F(`password`).length>0,modelValue:M.value.password,"onUpdate:modelValue":a[1]||=e=>M.value.password=e},null,8,[`invalid`,`modelValue`]),s(`label`,D,[a[5]||=s(`i`,{class:`bi bi-key`},null,-1),a[6]||=s(`span`,null,`密碼`,-1),P.value&&F(`password`).length>0?(h(),f(l(r),{key:0,severity:`error`,variant:`simple`,size:`small`,pt:{text:{class:`!text-[0.625rem]`}}},{default:o(()=>[m(y(F(`password`)),1)]),_:1})):d(``,!0)])]),_:1}),s(`div`,O,[S(l(p),{size:`small`,text:``,severity:`secondary`,pt:{root:{class:`text-xs!`}},label:`會員註冊`,onClick:a[2]||=e=>l(j).push({name:`Register`})})]),S(l(p),{type:`submit`,label:`登入`,loading:L.value},null,8,[`loading`])],32)]),_:1}))}});export{k as default};
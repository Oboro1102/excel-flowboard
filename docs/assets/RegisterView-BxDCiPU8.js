import{r as e,t}from"./floatlabel-OElZ2uia.js";import{n,r,t as i}from"./api-CvHUBlCF.js";import{B as a,Dt as o,J as s,Lt as c,Ut as l,W as u,X as d,Y as f,a as p,et as m,gt as h,m as g,q as _,qt as v,rt as y,tt as b}from"./index-Bu07tFg0.js";import{t as x}from"./LayoutLogin-v4ujrSaF.js";var S={for:`username`,class:`form__label form__label--whitMessage`},C={for:`password`,class:`form__label form__label--whitMessage`},w={class:`flex items-center justify-end gap-4`},T=y({__name:`RegisterView`,setup(y){let T=g(),E=a(),D=c({account:``,password:``}),O=_(()=>D.value.password.length<1||D.value.account.length<1),k=c(!1),A=e=>({account:[D.value.account.length<1?`請輸入帳號`:``].join(` `).trim(),password:[D.value.password.length<1?`請輸入密碼`:``].join(` `).trim()})[e],j=c(!1),M=async()=>{if(O.value){k.value=!0;return}else k.value=!1;try{j.value=!0;let e=await i.AUTH.POST_REGISTER(D.value);if(e.data.error){T.add({severity:`error`,summary:`註冊異常`,detail:e.data.message[0],life:3e3}),j.value=!1;return}return j.value=!1,E.push({name:`Index`})}catch(e){let{response:t}=e;T.add({severity:`error`,summary:`註冊異常`,detail:t.data.message[0],life:3e3}),j.value=!1}};return(i,a)=>(h(),f(x,null,{form:o(()=>[s(`form`,{class:`wrap--gap flex flex-col`,onSubmit:u(M,[`prevent`])},[b(l(t),{variant:`on`},{default:o(()=>[b(l(e),{id:`username`,fluid:``,autocomplete:`true`,invalid:k.value&&A(`account`).length>0,modelValue:D.value.account,"onUpdate:modelValue":a[0]||=e=>D.value.account=e},null,8,[`invalid`,`modelValue`]),s(`label`,S,[a[3]||=s(`i`,{class:`bi bi-person`},null,-1),a[4]||=s(`span`,null,`帳號`,-1),k.value&&A(`account`).length>0?(h(),f(l(r),{key:0,severity:`error`,variant:`simple`,size:`small`,pt:{text:{class:`!text-[0.625rem]`}}},{default:o(()=>[m(v(A(`account`)),1)]),_:1})):d(``,!0)])]),_:1}),b(l(t),{variant:`on`},{default:o(()=>[b(l(n),{inputId:`password`,fluid:``,feedback:!1,toggleMask:``,inputProps:{autocomplete:`false`},invalid:k.value&&A(`password`).length>0,modelValue:D.value.password,"onUpdate:modelValue":a[1]||=e=>D.value.password=e},null,8,[`invalid`,`modelValue`]),s(`label`,C,[a[5]||=s(`i`,{class:`bi bi-key`},null,-1),a[6]||=s(`span`,null,`密碼`,-1),k.value&&A(`password`).length>0?(h(),f(l(r),{key:0,severity:`error`,variant:`simple`,size:`small`,pt:{text:{class:`!text-[0.625rem]`}}},{default:o(()=>[m(v(A(`password`)),1)]),_:1})):d(``,!0)])]),_:1}),s(`div`,w,[b(l(p),{size:`small`,text:``,severity:`secondary`,pt:{root:{class:`text-xs!`}},label:`返回登入頁`,onClick:a[2]||=e=>l(E).push({name:`Login`})})]),b(l(p),{type:`submit`,label:`送出`,loading:j.value},null,8,[`loading`])],32)]),_:1}))}});export{T as default};
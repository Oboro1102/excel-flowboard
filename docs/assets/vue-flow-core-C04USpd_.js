import{At as e,Bt as t,Ct as n,Dt as r,Et as i,Ft as a,G as o,Ht as s,It as c,J as l,K as u,Kt as d,Lt as f,Mt as p,Nt as m,Pt as h,Q as g,St as _,Tt as v,Ut as y,Vt as b,Wt as x,X as S,Y as C,Z as w,_t as T,bt as E,ct as D,dt as O,et as k,ft as A,gt as j,ht as M,it as N,jt as P,kt as F,mt as I,ot as L,pt as R,q as z,qt as B,rt as V,st as H,tt as U,ut as W,vt as G,yt as K,zt as ee}from"./index-DRu-u0-8.js";function te(e){return P()?(h(e),!0):!1}function q(e){return typeof e==`function`?e():y(e)}var ne=typeof window<`u`&&typeof document<`u`,re=e=>e!==void 0,ie=Object.prototype.toString,ae=e=>ie.call(e)===`[object Object]`,oe=()=>{};function se(e,t){function n(...n){return new Promise((r,i)=>{Promise.resolve(e(()=>t.apply(this,n),{fn:t,thisArg:this,args:n})).then(r).catch(i)})}return n}var ce=e=>e();function le(e=ce){let t=f(!0);function n(){t.value=!1}function r(){t.value=!0}return{isActive:c(t),pause:n,resume:r,eventFilter:(...n)=>{t.value&&e(...n)}}}function ue(e,t=!1,n=`Timeout`){return new Promise((r,i)=>{t?setTimeout(()=>i(n),e):setTimeout(r,e)})}function de(e,t,n={}){let{eventFilter:r=ce,...a}=n;return i(e,se(r,t),a)}function fe(e,t,n={}){let{eventFilter:r,...i}=n,{eventFilter:a,pause:o,resume:s,isActive:c}=le(r);return{stop:de(e,t,{...i,eventFilter:a}),pause:o,resume:s,isActive:c}}function pe(e,t={}){if(!p(e))return b(e);let n=Array.isArray(e.value)?Array.from({length:e.value.length}):{};for(let r in e.value)n[r]=F(()=>({get(){return e.value[r]},set(n){if(q(t.replaceRef)??!0)if(Array.isArray(e.value)){let t=[...e.value];t[r]=n,e.value=t}else{let t={...e.value,[r]:n};Object.setPrototypeOf(t,Object.getPrototypeOf(e.value)),e.value=t}else e.value[r]=n}}));return n}function me(e,t=!1){function n(n,{flush:r=`sync`,deep:a=!1,timeout:o,throwOnTimeout:s}={}){let c=null,l=[new Promise(o=>{c=i(e,e=>{n(e)!==t&&(c?.(),o(e))},{flush:r,deep:a,immediate:!0})})];return o!=null&&l.push(ue(o,s).then(()=>q(e)).finally(()=>c?.())),Promise.race(l)}function r(r,a){if(!p(r))return n(e=>e===r,a);let{flush:o=`sync`,deep:s=!1,timeout:c,throwOnTimeout:l}=a??{},u=null,d=[new Promise(n=>{u=i([e,r],([e,r])=>{t!==(e===r)&&(u?.(),n(e))},{flush:o,deep:s,immediate:!0})})];return c!=null&&d.push(ue(c,l).then(()=>q(e)).finally(()=>(u?.(),q(e)))),Promise.race(d)}function a(e){return n(e=>!!e,e)}function o(e){return r(null,e)}function s(e){return r(void 0,e)}function c(e){return n(Number.isNaN,e)}function l(e,t){return n(t=>{let n=Array.from(t);return n.includes(e)||n.includes(q(e))},t)}function u(e){return d(1,e)}function d(e=1,t){let r=-1;return n(()=>(r+=1,r>=e),t)}return Array.isArray(q(e))?{toMatch:n,toContains:l,changed:u,changedTimes:d,get not(){return me(e,!t)}}:{toMatch:n,toBe:r,toBeTruthy:a,toBeNull:o,toBeNaN:c,toBeUndefined:s,changed:u,changedTimes:d,get not(){return me(e,!t)}}}function he(e){return me(e)}function ge(e){let t=q(e);return t?.$el??t}var _e=ne?window:void 0;function ve(...e){let t,n,r,a;if(typeof e[0]==`string`||Array.isArray(e[0])?([n,r,a]=e,t=_e):[t,n,r,a]=e,!t)return oe;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);let o=[],s=()=>{o.forEach(e=>e()),o.length=0},c=(e,t,n,r)=>(e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)),l=i(()=>[ge(t),q(a)],([e,t])=>{if(s(),!e)return;let i=ae(t)?{...t}:t;o.push(...n.flatMap(t=>r.map(n=>c(e,t,n,i))))},{immediate:!0,flush:`post`}),u=()=>{l(),s()};return te(u),u}function ye(e){return typeof e==`function`?e:typeof e==`string`?t=>t.key===e:Array.isArray(e)?t=>e.includes(t.key):()=>!0}function be(...e){let t,n,r={};e.length===3?(t=e[0],n=e[1],r=e[2]):e.length===2?typeof e[1]==`object`?(t=!0,n=e[0],r=e[1]):(t=e[0],n=e[1]):(t=!0,n=e[0]);let{target:i=_e,eventName:a=`keydown`,passive:o=!1,dedupe:s=!1}=r,c=ye(t);return ve(i,a,e=>{e.repeat&&q(s)||c(e)&&n(e)},o)}function xe(e){return JSON.parse(JSON.stringify(e))}function Se(e,t,n,r={}){let{clone:a=!1,passive:o=!1,eventName:s,deep:c=!1,defaultValue:l,shouldEmit:u}=r,d=N(),p=n||d?.emit||(d?.$emit)?.bind(d)||(d?.proxy?.$emit)?.bind(d?.proxy),m=s;t||=`modelValue`,m||=`update:${t.toString()}`;let h=e=>a?typeof a==`function`?a(e):xe(e):e,g=()=>re(e[t])?h(e[t]):l,_=e=>{u?u(e)&&p(m,e):p(m,e)};if(o){let n=f(g()),r=!1;return i(()=>e[t],e=>{r||(r=!0,n.value=h(e),O(()=>r=!1))}),i(n,n=>{!r&&(n!==e[t]||c)&&_(n)},{deep:c}),n}else return z({get(){return g()},set(e){_(e)}})}var Ce={value:()=>{}};function we(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+``)||r in n||/[\s.]/.test(r))throw Error(`illegal type: `+r);n[r]=[]}return new Te(n)}function Te(e){this._=e}function Ee(e,t){return e.trim().split(/^|\s+/).map(function(e){var n=``,r=e.indexOf(`.`);if(r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),e&&!t.hasOwnProperty(e))throw Error(`unknown type: `+e);return{type:e,name:n}})}Te.prototype=we.prototype={constructor:Te,on:function(e,t){var n=this._,r=Ee(e+``,n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=De(n[i],e.name)))return i;return}if(t!=null&&typeof t!=`function`)throw Error(`invalid callback: `+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=Oe(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Oe(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Te(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw Error(`unknown type: `+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function De(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Oe(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Ce,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var ke=`http://www.w3.org/1999/xhtml`,Ae={svg:`http://www.w3.org/2000/svg`,xhtml:ke,xlink:`http://www.w3.org/1999/xlink`,xml:`http://www.w3.org/XML/1998/namespace`,xmlns:`http://www.w3.org/2000/xmlns/`};function je(e){var t=e+=``,n=t.indexOf(`:`);return n>=0&&(t=e.slice(0,n))!==`xmlns`&&(e=e.slice(n+1)),Ae.hasOwnProperty(t)?{space:Ae[t],local:e}:e}function Me(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===ke&&t.documentElement.namespaceURI===ke?t.createElement(e):t.createElementNS(n,e)}}function Ne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Pe(e){var t=je(e);return(t.local?Ne:Me)(t)}function Fe(){}function Ie(e){return e==null?Fe:function(){return this.querySelector(e)}}function Le(e){typeof e!=`function`&&(e=Ie(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=Array(o),c,l,u=0;u<o;++u)(c=a[u])&&(l=e.call(c,c.__data__,u,a))&&(`__data__`in c&&(l.__data__=c.__data__),s[u]=l);return new En(r,this._parents)}function Re(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function ze(){return[]}function Be(e){return e==null?ze:function(){return this.querySelectorAll(e)}}function Ve(e){return function(){return Re(e.apply(this,arguments))}}function He(e){e=typeof e==`function`?Ve(e):Be(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&(r.push(e.call(c,c.__data__,l,o)),i.push(c));return new En(r,i)}function Ue(e){return function(){return this.matches(e)}}function We(e){return function(t){return t.matches(e)}}var Ge=Array.prototype.find;function Ke(e){return function(){return Ge.call(this.children,e)}}function qe(){return this.firstElementChild}function Je(e){return this.select(e==null?qe:Ke(typeof e==`function`?e:We(e)))}var Ye=Array.prototype.filter;function Xe(){return Array.from(this.children)}function Ze(e){return function(){return Ye.call(this.children,e)}}function Qe(e){return this.selectAll(e==null?Xe:Ze(typeof e==`function`?e:We(e)))}function $e(e){typeof e!=`function`&&(e=Ue(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new En(r,this._parents)}function et(e){return Array(e.length)}function tt(){return new En(this._enter||this._groups.map(et),this._parents)}function nt(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}nt.prototype={constructor:nt,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rt(e){return function(){return e}}function it(e,t,n,r,i,a){for(var o=0,s,c=t.length,l=a.length;o<l;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new nt(e,a[o]);for(;o<c;++o)(s=t[o])&&(i[o]=s)}function at(e,t,n,r,i,a,o){var s,c,l=new Map,u=t.length,d=a.length,f=Array(u),p;for(s=0;s<u;++s)(c=t[s])&&(f[s]=p=o.call(c,c.__data__,s,t)+``,l.has(p)?i[s]=c:l.set(p,c));for(s=0;s<d;++s)p=o.call(e,a[s],s,a)+``,(c=l.get(p))?(r[s]=c,c.__data__=a[s],l.delete(p)):n[s]=new nt(e,a[s]);for(s=0;s<u;++s)(c=t[s])&&l.get(f[s])===c&&(i[s]=c)}function ot(e){return e.__data__}function st(e,t){if(!arguments.length)return Array.from(this,ot);var n=t?at:it,r=this._parents,i=this._groups;typeof e!=`function`&&(e=rt(e));for(var a=i.length,o=Array(a),s=Array(a),c=Array(a),l=0;l<a;++l){var u=r[l],d=i[l],f=d.length,p=ct(e.call(u,u&&u.__data__,l,r)),m=p.length,h=s[l]=Array(m),g=o[l]=Array(m);n(u,d,h,g,c[l]=Array(f),p,t);for(var _=0,v=0,y,b;_<m;++_)if(y=h[_]){for(_>=v&&(v=_+1);!(b=g[v])&&++v<m;);y._next=b||null}}return o=new En(o,r),o._enter=s,o._exit=c,o}function ct(e){return typeof e==`object`&&`length`in e?e:Array.from(e)}function lt(){return new En(this._exit||this._groups.map(et),this._parents)}function ut(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e==`function`?(r=e(r),r&&=r.selection()):r=r.append(e+``),t!=null&&(i=t(i),i&&=i.selection()),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function dt(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=Array(i),c=0;c<o;++c)for(var l=n[c],u=r[c],d=l.length,f=s[c]=Array(d),p,m=0;m<d;++m)(p=l[m]||u[m])&&(f[m]=p);for(;c<i;++c)s[c]=n[c];return new En(s,this._parents)}function ft(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function pt(e){e||=mt;function t(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}for(var n=this._groups,r=n.length,i=Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,c=i[a]=Array(s),l,u=0;u<s;++u)(l=o[u])&&(c[u]=l);c.sort(t)}return new En(i,this._parents).order()}function mt(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function ht(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function gt(){return Array.from(this)}function _t(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function vt(){let e=0;for(let t of this)++e;return e}function yt(){return!this.node()}function bt(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function xt(e){return function(){this.removeAttribute(e)}}function St(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Ct(e,t){return function(){this.setAttribute(e,t)}}function wt(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tt(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Et(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Dt(e,t){var n=je(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?St:xt:typeof t==`function`?n.local?Et:Tt:n.local?wt:Ct)(n,t))}function Ot(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function kt(e){return function(){this.style.removeProperty(e)}}function At(e,t,n){return function(){this.style.setProperty(e,t,n)}}function jt(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Mt(e,t,n){return arguments.length>1?this.each((t==null?kt:typeof t==`function`?jt:At)(e,t,n??``)):Nt(this.node(),e)}function Nt(e,t){return e.style.getPropertyValue(t)||Ot(e).getComputedStyle(e,null).getPropertyValue(t)}function Pt(e){return function(){delete this[e]}}function Ft(e,t){return function(){this[e]=t}}function It(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Lt(e,t){return arguments.length>1?this.each((t==null?Pt:typeof t==`function`?It:Ft)(e,t)):this.node()[e]}function Rt(e){return e.trim().split(/^|\s+/)}function zt(e){return e.classList||new Bt(e)}function Bt(e){this._node=e,this._names=Rt(e.getAttribute(`class`)||``)}Bt.prototype={add:function(e){this._names.indexOf(e)<0&&(this._names.push(e),this._node.setAttribute(`class`,this._names.join(` `)))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute(`class`,this._names.join(` `)))},contains:function(e){return this._names.indexOf(e)>=0}};function Vt(e,t){for(var n=zt(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Ht(e,t){for(var n=zt(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Ut(e){return function(){Vt(this,e)}}function Wt(e){return function(){Ht(this,e)}}function Gt(e,t){return function(){(t.apply(this,arguments)?Vt:Ht)(this,e)}}function Kt(e,t){var n=Rt(e+``);if(arguments.length<2){for(var r=zt(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t==`function`?Gt:t?Ut:Wt)(n,t))}function qt(){this.textContent=``}function Jt(e){return function(){this.textContent=e}}function Yt(e){return function(){this.textContent=e.apply(this,arguments)??``}}function Xt(e){return arguments.length?this.each(e==null?qt:(typeof e==`function`?Yt:Jt)(e)):this.node().textContent}function Zt(){this.innerHTML=``}function Qt(e){return function(){this.innerHTML=e}}function $t(e){return function(){this.innerHTML=e.apply(this,arguments)??``}}function en(e){return arguments.length?this.each(e==null?Zt:(typeof e==`function`?$t:Qt)(e)):this.node().innerHTML}function tn(){this.nextSibling&&this.parentNode.appendChild(this)}function nn(){return this.each(tn)}function rn(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function an(){return this.each(rn)}function on(e){var t=typeof e==`function`?e:Pe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function sn(){return null}function cn(e,t){var n=typeof e==`function`?e:Pe(e),r=t==null?sn:typeof t==`function`?t:Ie(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function ln(){var e=this.parentNode;e&&e.removeChild(this)}function un(){return this.each(ln)}function dn(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fn(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function pn(e){return this.select(e?fn:dn)}function mn(e){return arguments.length?this.property(`__data__`,e):this.node().__data__}function hn(e){return function(t){e.call(this,t,this.__data__)}}function gn(e){return e.trim().split(/^|\s+/).map(function(e){var t=``,n=e.indexOf(`.`);return n>=0&&(t=e.slice(n+1),e=e.slice(0,n)),{type:e,name:t}})}function _n(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function vn(e,t,n){return function(){var r=this.__on,i,a=hn(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function yn(e,t,n){var r=gn(e+``),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var c=0,l=s.length,u;c<l;++c)for(i=0,u=s[c];i<a;++i)if((o=r[i]).type===u.type&&o.name===u.name)return u.value}return}for(s=t?vn:_n,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function bn(e,t,n){var r=Ot(e),i=r.CustomEvent;typeof i==`function`?i=new i(t,n):(i=r.document.createEvent(`Event`),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function xn(e,t){return function(){return bn(this,e,t)}}function Sn(e,t){return function(){return bn(this,e,t.apply(this,arguments))}}function Cn(e,t){return this.each((typeof t==`function`?Sn:xn)(e,t))}function*wn(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var Tn=[null];function En(e,t){this._groups=e,this._parents=t}function Dn(){return new En([[document.documentElement]],Tn)}function On(){return this}En.prototype=Dn.prototype={constructor:En,select:Le,selectAll:He,selectChild:Je,selectChildren:Qe,filter:$e,data:st,enter:tt,exit:lt,join:ut,merge:dt,selection:On,order:ft,sort:pt,call:ht,nodes:gt,node:_t,size:vt,empty:yt,each:bt,attr:Dt,style:Mt,property:Lt,classed:Kt,text:Xt,html:en,raise:nn,lower:an,append:on,insert:cn,remove:un,clone:pn,datum:mn,on:yn,dispatch:Cn,[Symbol.iterator]:wn};function kn(e){return typeof e==`string`?new En([[document.querySelector(e)]],[document.documentElement]):new En([[e]],Tn)}function An(e){let t;for(;t=e.sourceEvent;)e=t;return e}function jn(e,t){if(e=An(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var Mn={passive:!1},Nn={capture:!0,passive:!1};function Pn(e){e.stopImmediatePropagation()}function Fn(e){e.preventDefault(),e.stopImmediatePropagation()}function In(e){var t=e.document.documentElement,n=kn(e).on(`dragstart.drag`,Fn,Nn);`onselectstart`in t?n.on(`selectstart.drag`,Fn,Nn):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect=`none`)}function Ln(e,t){var n=e.document.documentElement,r=kn(e).on(`dragstart.drag`,null);t&&(r.on(`click.drag`,Fn,Nn),setTimeout(function(){r.on(`click.drag`,null)},0)),`onselectstart`in n?r.on(`selectstart.drag`,null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}var Rn=e=>()=>e;function zn(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:a,x:o,y:s,dx:c,dy:l,dispatch:u}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:a,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:s,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:l,enumerable:!0,configurable:!0},_:{value:u}})}zn.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Bn(e){return!e.ctrlKey&&!e.button}function Vn(){return this.parentNode}function Hn(e,t){return t??{x:e.x,y:e.y}}function Un(){return navigator.maxTouchPoints||`ontouchstart`in this}function Wn(){var e=Bn,t=Vn,n=Hn,r=Un,i={},a=we(`start`,`drag`,`end`),o=0,s,c,l,u,d=0;function f(e){e.on(`mousedown.drag`,p).filter(r).on(`touchstart.drag`,g).on(`touchmove.drag`,_,Mn).on(`touchend.drag touchcancel.drag`,v).style(`touch-action`,`none`).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}function p(n,r){if(!(u||!e.call(this,n,r))){var i=y(this,t.call(this,n,r),n,r,`mouse`);i&&(kn(n.view).on(`mousemove.drag`,m,Nn).on(`mouseup.drag`,h,Nn),In(n.view),Pn(n),l=!1,s=n.clientX,c=n.clientY,i(`start`,n))}}function m(e){if(Fn(e),!l){var t=e.clientX-s,n=e.clientY-c;l=t*t+n*n>d}i.mouse(`drag`,e)}function h(e){kn(e.view).on(`mousemove.drag mouseup.drag`,null),Ln(e.view,l),Fn(e),i.mouse(`end`,e)}function g(n,r){if(e.call(this,n,r)){var i=n.changedTouches,a=t.call(this,n,r),o=i.length,s,c;for(s=0;s<o;++s)(c=y(this,a,n,r,i[s].identifier,i[s]))&&(Pn(n),c(`start`,n,i[s]))}}function _(e){var t=e.changedTouches,n=t.length,r,a;for(r=0;r<n;++r)(a=i[t[r].identifier])&&(Fn(e),a(`drag`,e,t[r]))}function v(e){var t=e.changedTouches,n=t.length,r,a;for(u&&clearTimeout(u),u=setTimeout(function(){u=null},500),r=0;r<n;++r)(a=i[t[r].identifier])&&(Pn(e),a(`end`,e,t[r]))}function y(e,t,r,s,c,l){var u=a.copy(),d=jn(l||r,t),p,m,h;if((h=n.call(e,new zn(`beforestart`,{sourceEvent:r,target:f,identifier:c,active:o,x:d[0],y:d[1],dx:0,dy:0,dispatch:u}),s))!=null)return p=h.x-d[0]||0,m=h.y-d[1]||0,function n(r,a,l){var g=d,_;switch(r){case`start`:i[c]=n,_=o++;break;case`end`:delete i[c],--o;case`drag`:d=jn(l||a,t),_=o;break}u.call(r,e,new zn(r,{sourceEvent:a,subject:h,target:f,identifier:c,active:_,x:d[0]+p,y:d[1]+m,dx:d[0]-g[0],dy:d[1]-g[1],dispatch:u}),s)}}return f.filter=function(t){return arguments.length?(e=typeof t==`function`?t:Rn(!!t),f):e},f.container=function(e){return arguments.length?(t=typeof e==`function`?e:Rn(e),f):t},f.subject=function(e){return arguments.length?(n=typeof e==`function`?e:Rn(e),f):n},f.touchable=function(e){return arguments.length?(r=typeof e==`function`?e:Rn(!!e),f):r},f.on=function(){var e=a.on.apply(a,arguments);return e===a?f:e},f.clickDistance=function(e){return arguments.length?(d=(e=+e)*e,f):Math.sqrt(d)},f}function Gn(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Kn(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function qn(){}var Jn=.7,Yn=1/Jn,Xn=`\\s*([+-]?\\d+)\\s*`,Zn=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*`,Qn=`\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*`,$n=/^#([0-9a-f]{3,8})$/,er=RegExp(`^rgb\\(${Xn},${Xn},${Xn}\\)$`),tr=RegExp(`^rgb\\(${Qn},${Qn},${Qn}\\)$`),nr=RegExp(`^rgba\\(${Xn},${Xn},${Xn},${Zn}\\)$`),rr=RegExp(`^rgba\\(${Qn},${Qn},${Qn},${Zn}\\)$`),ir=RegExp(`^hsl\\(${Zn},${Qn},${Qn}\\)$`),ar=RegExp(`^hsla\\(${Zn},${Qn},${Qn},${Zn}\\)$`),or={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Gn(qn,dr,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:sr,formatHex:sr,formatHex8:cr,formatHsl:lr,formatRgb:ur,toString:ur});function sr(){return this.rgb().formatHex()}function cr(){return this.rgb().formatHex8()}function lr(){return wr(this).formatHsl()}function ur(){return this.rgb().formatRgb()}function dr(e){var t,n;return e=(e+``).trim().toLowerCase(),(t=$n.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?fr(t):n===3?new gr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?pr(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?pr(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=er.exec(e))?new gr(t[1],t[2],t[3],1):(t=tr.exec(e))?new gr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=nr.exec(e))?pr(t[1],t[2],t[3],t[4]):(t=rr.exec(e))?pr(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ir.exec(e))?Cr(t[1],t[2]/100,t[3]/100,1):(t=ar.exec(e))?Cr(t[1],t[2]/100,t[3]/100,t[4]):or.hasOwnProperty(e)?fr(or[e]):e===`transparent`?new gr(NaN,NaN,NaN,0):null}function fr(e){return new gr(e>>16&255,e>>8&255,e&255,1)}function pr(e,t,n,r){return r<=0&&(e=t=n=NaN),new gr(e,t,n,r)}function mr(e){return e instanceof qn||(e=dr(e)),e?(e=e.rgb(),new gr(e.r,e.g,e.b,e.opacity)):new gr}function hr(e,t,n,r){return arguments.length===1?mr(e):new gr(e,t,n,r??1)}function gr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Gn(gr,hr,Kn(qn,{brighter(e){return e=e==null?Yn:Yn**+e,new gr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Jn:Jn**+e,new gr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new gr(xr(this.r),xr(this.g),xr(this.b),br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:_r,formatHex:_r,formatHex8:vr,formatRgb:yr,toString:yr}));function _r(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}`}function vr(){return`#${Sr(this.r)}${Sr(this.g)}${Sr(this.b)}${Sr((isNaN(this.opacity)?1:this.opacity)*255)}`}function yr(){let e=br(this.opacity);return`${e===1?`rgb(`:`rgba(`}${xr(this.r)}, ${xr(this.g)}, ${xr(this.b)}${e===1?`)`:`, ${e})`}`}function br(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function xr(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Sr(e){return e=xr(e),(e<16?`0`:``)+e.toString(16)}function Cr(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Er(e,t,n,r)}function wr(e){if(e instanceof Er)return new Er(e.h,e.s,e.l,e.opacity);if(e instanceof qn||(e=dr(e)),!e)return new Er;if(e instanceof Er)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,c=(a+i)/2;return s?(o=t===a?(n-r)/s+(n<r)*6:n===a?(r-t)/s+2:(t-n)/s+4,s/=c<.5?a+i:2-a-i,o*=60):s=c>0&&c<1?0:o,new Er(o,s,c,e.opacity)}function Tr(e,t,n,r){return arguments.length===1?wr(e):new Er(e,t,n,r??1)}function Er(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Gn(Er,Tr,Kn(qn,{brighter(e){return e=e==null?Yn:Yn**+e,new Er(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Jn:Jn**+e,new Er(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new gr(kr(e>=240?e-240:e+120,i,r),kr(e,i,r),kr(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Er(Dr(this.h),Or(this.s),Or(this.l),br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){let e=br(this.opacity);return`${e===1?`hsl(`:`hsla(`}${Dr(this.h)}, ${Or(this.s)*100}%, ${Or(this.l)*100}%${e===1?`)`:`, ${e})`}`}}));function Dr(e){return e=(e||0)%360,e<0?e+360:e}function Or(e){return Math.max(0,Math.min(1,e||0))}function kr(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}var Ar=e=>()=>e;function jr(e,t){return function(n){return e+n*t}}function Mr(e,t,n){return e**=+n,t=t**+n-e,n=1/n,function(r){return(e+r*t)**+n}}function Nr(e){return(e=+e)==1?Pr:function(t,n){return n-t?Mr(t,n,e):Ar(isNaN(t)?n:t)}}function Pr(e,t){var n=t-e;return n?jr(e,n):Ar(isNaN(e)?t:e)}var Fr=function e(t){var n=Nr(t);function r(e,t){var r=n((e=hr(e)).r,(t=hr(t)).r),i=n(e.g,t.g),a=n(e.b,t.b),o=Pr(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=a(t),e.opacity=o(t),e+``}}return r.gamma=e,r}(1);function Ir(e,t){t||=[];var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Lr(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Rr(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=Array(r),a=Array(n),o;for(o=0;o<r;++o)i[o]=qr(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(e){for(o=0;o<r;++o)a[o]=i[o](e);return a}}function zr(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Br(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Vr(e,t){var n={},r={},i;for(i in(typeof e!=`object`||!e)&&(e={}),(typeof t!=`object`||!t)&&(t={}),t)i in e?n[i]=qr(e[i],t[i]):r[i]=t[i];return function(e){for(i in n)r[i]=n[i](e);return r}}var Hr=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ur=new RegExp(Hr.source,`g`);function Wr(e){return function(){return e}}function Gr(e){return function(t){return e(t)+``}}function Kr(e,t){var n=Hr.lastIndex=Ur.lastIndex=0,r,i,a,o=-1,s=[],c=[];for(e+=``,t+=``;(r=Hr.exec(e))&&(i=Ur.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,c.push({i:o,x:Br(r,i)})),n=Ur.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?c[0]?Gr(c[0].x):Wr(t):(t=c.length,function(e){for(var n=0,r;n<t;++n)s[(r=c[n]).i]=r.x(e);return s.join(``)})}function qr(e,t){var n=typeof t,r;return t==null||n===`boolean`?Ar(t):(n===`number`?Br:n===`string`?(r=dr(t))?(t=r,Fr):Kr:t instanceof dr?Fr:t instanceof Date?zr:Lr(t)?Ir:Array.isArray(t)?Rr:typeof t.valueOf!=`function`&&typeof t.toString!=`function`||isNaN(t)?Vr:Br)(e,t)}var Jr=180/Math.PI,Yr={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Xr(e,t,n,r,i,a){var o,s,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,c/=s),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*Jr,skewX:Math.atan(c)*Jr,scaleX:o,scaleY:s}}var Zr;function Qr(e){let t=new(typeof DOMMatrix==`function`?DOMMatrix:WebKitCSSMatrix)(e+``);return t.isIdentity?Yr:Xr(t.a,t.b,t.c,t.d,t.e,t.f)}function $r(e){return e==null||(Zr||=document.createElementNS(`http://www.w3.org/2000/svg`,`g`),Zr.setAttribute(`transform`,e),!(e=Zr.transform.baseVal.consolidate()))?Yr:(e=e.matrix,Xr(e.a,e.b,e.c,e.d,e.e,e.f))}function ei(e,t,n,r){function i(e){return e.length?e.pop()+` `:``}function a(e,r,i,a,o,s){if(e!==i||r!==a){var c=o.push(`translate(`,null,t,null,n);s.push({i:c-4,x:Br(e,i)},{i:c-2,x:Br(r,a)})}else (i||a)&&o.push(`translate(`+i+t+a+n)}function o(e,t,n,a){e===t?t&&n.push(i(n)+`rotate(`+t+r):(e-t>180?t+=360:t-e>180&&(e+=360),a.push({i:n.push(i(n)+`rotate(`,null,r)-2,x:Br(e,t)}))}function s(e,t,n,a){e===t?t&&n.push(i(n)+`skewX(`+t+r):a.push({i:n.push(i(n)+`skewX(`,null,r)-2,x:Br(e,t)})}function c(e,t,n,r,a,o){if(e!==n||t!==r){var s=a.push(i(a)+`scale(`,null,`,`,null,`)`);o.push({i:s-4,x:Br(e,n)},{i:s-2,x:Br(t,r)})}else (n!==1||r!==1)&&a.push(i(a)+`scale(`+n+`,`+r+`)`)}return function(t,n){var r=[],i=[];return t=e(t),n=e(n),a(t.translateX,t.translateY,n.translateX,n.translateY,r,i),o(t.rotate,n.rotate,r,i),s(t.skewX,n.skewX,r,i),c(t.scaleX,t.scaleY,n.scaleX,n.scaleY,r,i),t=n=null,function(e){for(var t=-1,n=i.length,a;++t<n;)r[(a=i[t]).i]=a.x(e);return r.join(``)}}}var ti=ei(Qr,`px, `,`px)`,`deg)`),ni=ei($r,`, `,`)`,`)`),ri=1e-12;function ii(e){return((e=Math.exp(e))+1/e)/2}function ai(e){return((e=Math.exp(e))-1/e)/2}function oi(e){return((e=Math.exp(2*e))-1)/(e+1)}var si=function e(t,n,r){function i(e,i){var a=e[0],o=e[1],s=e[2],c=i[0],l=i[1],u=i[2],d=c-a,f=l-o,p=d*d+f*f,m,h;if(p<ri)h=Math.log(u/s)/t,m=function(e){return[a+e*d,o+e*f,s*Math.exp(t*e*h)]};else{var g=Math.sqrt(p),_=(u*u-s*s+r*p)/(2*s*n*g),v=(u*u-s*s-r*p)/(2*u*n*g),y=Math.log(Math.sqrt(_*_+1)-_);h=(Math.log(Math.sqrt(v*v+1)-v)-y)/t,m=function(e){var r=e*h,i=ii(y),c=s/(n*g)*(i*oi(t*r+y)-ai(y));return[a+c*d,o+c*f,s*i/ii(t*r+y)]}}return m.duration=h*1e3*t/Math.SQRT2,m}return i.rho=function(t){var n=Math.max(.001,+t),r=n*n;return e(n,r,r*r)},i}(Math.SQRT2,2,4),ci=0,li=0,ui=0,di=1e3,fi,pi,mi=0,hi=0,gi=0,_i=typeof performance==`object`&&performance.now?performance:Date,vi=typeof window==`object`&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function yi(){return hi||=(vi(bi),_i.now()+gi)}function bi(){hi=0}function xi(){this._call=this._time=this._next=null}xi.prototype=Si.prototype={constructor:xi,restart:function(e,t,n){if(typeof e!=`function`)throw TypeError(`callback is not a function`);n=(n==null?yi():+n)+(t==null?0:+t),!this._next&&pi!==this&&(pi?pi._next=this:fi=this,pi=this),this._call=e,this._time=n,Di()},stop:function(){this._call&&(this._call=null,this._time=1/0,Di())}};function Si(e,t,n){var r=new xi;return r.restart(e,t,n),r}function Ci(){yi(),++ci;for(var e=fi,t;e;)(t=hi-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ci}function wi(){hi=(mi=_i.now())+gi,ci=li=0;try{Ci()}finally{ci=0,Ei(),hi=0}}function Ti(){var e=_i.now(),t=e-mi;t>di&&(gi-=t,mi=e)}function Ei(){for(var e,t=fi,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:fi=n);pi=e,Di(r)}function Di(e){ci||(li&&=clearTimeout(li),e-hi>24?(e<1/0&&(li=setTimeout(wi,e-_i.now()-gi)),ui&&=clearInterval(ui)):(ui||=(mi=_i.now(),setInterval(Ti,di)),ci=1,vi(wi)))}function Oi(e,t,n){var r=new xi;return t=t==null?0:+t,r.restart(n=>{r.stop(),e(n+t)},t,n),r}var ki=we(`start`,`end`,`cancel`,`interrupt`),Ai=[],ji=0,Mi=1,Ni=2,Pi=3,Fi=4,Ii=5,Li=6;function Ri(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Hi(e,n,{name:t,index:r,group:i,on:ki,tween:Ai,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:ji})}function zi(e,t){var n=Vi(e,t);if(n.state>ji)throw Error(`too late; already scheduled`);return n}function Bi(e,t){var n=Vi(e,t);if(n.state>Pi)throw Error(`too late; already running`);return n}function Vi(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw Error(`transition not found`);return n}function Hi(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Si(a,0,n.time);function a(e){n.state=Mi,n.timer.restart(o,n.delay,n.time),n.delay<=e&&o(e-n.delay)}function o(a){var l,u,d,f;if(n.state!==Mi)return c();for(l in r)if(f=r[l],f.name===n.name){if(f.state===Pi)return Oi(o);f.state===Fi?(f.state=Li,f.timer.stop(),f.on.call(`interrupt`,e,e.__data__,f.index,f.group),delete r[l]):+l<t&&(f.state=Li,f.timer.stop(),f.on.call(`cancel`,e,e.__data__,f.index,f.group),delete r[l])}if(Oi(function(){n.state===Pi&&(n.state=Fi,n.timer.restart(s,n.delay,n.time),s(a))}),n.state=Ni,n.on.call(`start`,e,e.__data__,n.index,n.group),n.state===Ni){for(n.state=Pi,i=Array(d=n.tween.length),l=0,u=-1;l<d;++l)(f=n.tween[l].value.call(e,e.__data__,n.index,n.group))&&(i[++u]=f);i.length=u+1}}function s(t){for(var r=t<n.duration?n.ease.call(null,t/n.duration):(n.timer.restart(c),n.state=Ii,1),a=-1,o=i.length;++a<o;)i[a].call(e,r);n.state===Ii&&(n.on.call(`end`,e,e.__data__,n.index,n.group),c())}function c(){for(var i in n.state=Li,n.timer.stop(),delete r[t],r)return;delete e.__transition}}function Ui(e,t){var n=e.__transition,r,i,a=!0,o;if(n){for(o in t=t==null?null:t+``,n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Ni&&r.state<Ii,r.state=Li,r.timer.stop(),r.on.call(i?`interrupt`:`cancel`,e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function Wi(e){return this.each(function(){Ui(this,e)})}function Gi(e,t){var n,r;return function(){var i=Bi(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Ki(e,t,n){var r,i;if(typeof n!=`function`)throw Error();return function(){var a=Bi(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},c=0,l=i.length;c<l;++c)if(i[c].name===t){i[c]=s;break}c===l&&i.push(s)}a.tween=i}}function qi(e,t){var n=this._id;if(e+=``,arguments.length<2){for(var r=Vi(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Gi:Ki)(n,e,t))}function Ji(e,t,n){var r=e._id;return e.each(function(){var e=Bi(this,r);(e.value||={})[t]=n.apply(this,arguments)}),function(e){return Vi(e,r).value[t]}}function Yi(e,t){var n;return(typeof t==`number`?Br:t instanceof dr?Fr:(n=dr(t))?(t=n,Fr):Kr)(e,t)}function Xi(e){return function(){this.removeAttribute(e)}}function Zi(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Qi(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function $i(e,t,n){var r,i=n+``,a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function ea(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function ta(e,t,n){var r,i,a;return function(){var o,s=n(this),c;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=s+``,o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s)))}}function na(e,t){var n=je(e),r=n===`transform`?ni:Yi;return this.attrTween(e,typeof t==`function`?(n.local?ta:ea)(n,r,Ji(this,`attr.`+e,t)):t==null?(n.local?Zi:Xi)(n):(n.local?$i:Qi)(n,r,t))}function ra(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function ia(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function aa(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ia(e,i)),n}return i._value=t,i}function oa(e,t){var n,r;function i(){var i=t.apply(this,arguments);return i!==r&&(n=(r=i)&&ra(e,i)),n}return i._value=t,i}function sa(e,t){var n=`attr.`+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!=`function`)throw Error();var r=je(e);return this.tween(n,(r.local?aa:oa)(r,t))}function ca(e,t){return function(){zi(this,e).delay=+t.apply(this,arguments)}}function la(e,t){return t=+t,function(){zi(this,e).delay=t}}function ua(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?ca:la)(t,e)):Vi(this.node(),t).delay}function da(e,t){return function(){Bi(this,e).duration=+t.apply(this,arguments)}}function fa(e,t){return t=+t,function(){Bi(this,e).duration=t}}function pa(e){var t=this._id;return arguments.length?this.each((typeof e==`function`?da:fa)(t,e)):Vi(this.node(),t).duration}function ma(e,t){if(typeof t!=`function`)throw Error();return function(){Bi(this,e).ease=t}}function ha(e){var t=this._id;return arguments.length?this.each(ma(t,e)):Vi(this.node(),t).ease}function ga(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!=`function`)throw Error();Bi(this,e).ease=n}}function _a(e){if(typeof e!=`function`)throw Error();return this.each(ga(this._id,e))}function va(e){typeof e!=`function`&&(e=Ue(e));for(var t=this._groups,n=t.length,r=Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],c,l=0;l<o;++l)(c=a[l])&&e.call(c,c.__data__,l,a)&&s.push(c);return new qa(r,this._parents,this._name,this._id)}function ya(e){if(e._id!==this._id)throw Error();for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=Array(r),s=0;s<a;++s)for(var c=t[s],l=n[s],u=c.length,d=o[s]=Array(u),f,p=0;p<u;++p)(f=c[p]||l[p])&&(d[p]=f);for(;s<r;++s)o[s]=t[s];return new qa(o,this._parents,this._name,this._id)}function ba(e){return(e+``).trim().split(/^|\s+/).every(function(e){var t=e.indexOf(`.`);return t>=0&&(e=e.slice(0,t)),!e||e===`start`})}function xa(e,t,n){var r,i,a=ba(t)?zi:Bi;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function Sa(e,t){var n=this._id;return arguments.length<2?Vi(this.node(),n).on.on(e):this.each(xa(n,e,t))}function Ca(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function wa(){return this.on(`end.remove`,Ca(this._id))}function Ta(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Ie(e));for(var r=this._groups,i=r.length,a=Array(i),o=0;o<i;++o)for(var s=r[o],c=s.length,l=a[o]=Array(c),u,d,f=0;f<c;++f)(u=s[f])&&(d=e.call(u,u.__data__,f,s))&&(`__data__`in u&&(d.__data__=u.__data__),l[f]=d,Ri(l[f],t,n,f,l,Vi(u,n)));return new qa(a,this._parents,t,n)}function Ea(e){var t=this._name,n=this._id;typeof e!=`function`&&(e=Be(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var c=r[s],l=c.length,u,d=0;d<l;++d)if(u=c[d]){for(var f=e.call(u,u.__data__,d,c),p,m=Vi(u,n),h=0,g=f.length;h<g;++h)(p=f[h])&&Ri(p,t,n,h,f,m);a.push(f),o.push(u)}return new qa(a,o,t,n)}var Da=Dn.prototype.constructor;function Oa(){return new Da(this._groups,this._parents)}function ka(e,t){var n,r,i;return function(){var a=Nt(this,e),o=(this.style.removeProperty(e),Nt(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function Aa(e){return function(){this.style.removeProperty(e)}}function ja(e,t,n){var r,i=n+``,a;return function(){var o=Nt(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function Ma(e,t,n){var r,i,a;return function(){var o=Nt(this,e),s=n(this),c=s+``;return s??(c=s=(this.style.removeProperty(e),Nt(this,e))),o===c?null:o===r&&c===i?a:(i=c,a=t(r=o,s))}}function Na(e,t){var n,r,i,a=`style.`+t,o=`end.`+a,s;return function(){var c=Bi(this,e),l=c.on,u=c.value[a]==null?s||=Aa(t):void 0;(l!==n||i!==u)&&(r=(n=l).copy()).on(o,i=u),c.on=r}}function Pa(e,t,n){var r=(e+=``)==`transform`?ti:Yi;return t==null?this.styleTween(e,ka(e,r)).on(`end.style.`+e,Aa(e)):typeof t==`function`?this.styleTween(e,Ma(e,r,Ji(this,`style.`+e,t))).each(Na(this._id,e)):this.styleTween(e,ja(e,r,t),n).on(`end.style.`+e,null)}function Fa(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Ia(e,t,n){var r,i;function a(){var a=t.apply(this,arguments);return a!==i&&(r=(i=a)&&Fa(e,a,n)),r}return a._value=t,a}function La(e,t,n){var r=`style.`+(e+=``);if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!=`function`)throw Error();return this.tween(r,Ia(e,t,n??``))}function Ra(e){return function(){this.textContent=e}}function za(e){return function(){this.textContent=e(this)??``}}function Ba(e){return this.tween(`text`,typeof e==`function`?za(Ji(this,`text`,e)):Ra(e==null?``:e+``))}function Va(e){return function(t){this.textContent=e.call(this,t)}}function Ha(e){var t,n;function r(){var r=e.apply(this,arguments);return r!==n&&(t=(n=r)&&Va(r)),t}return r._value=e,r}function Ua(e){var t=`text`;if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!=`function`)throw Error();return this.tween(t,Ha(e))}function Wa(){for(var e=this._name,t=this._id,n=Ja(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)if(c=o[l]){var u=Vi(c,t);Ri(c,e,n,l,o,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new qa(r,this._parents,e,n)}function Ga(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},c={value:function(){--i===0&&a()}};n.each(function(){var n=Bi(this,r),i=n.on;i!==e&&(t=(e=i).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(c)),n.on=t}),i===0&&a()})}var Ka=0;function qa(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function Ja(){return++Ka}var Ya=Dn.prototype;qa.prototype={constructor:qa,select:Ta,selectAll:Ea,selectChild:Ya.selectChild,selectChildren:Ya.selectChildren,filter:va,merge:ya,selection:Oa,transition:Wa,call:Ya.call,nodes:Ya.nodes,node:Ya.node,size:Ya.size,empty:Ya.empty,each:Ya.each,on:Sa,attr:na,attrTween:sa,style:Pa,styleTween:La,text:Ba,textTween:Ua,remove:wa,tween:qi,delay:ua,duration:pa,ease:ha,easeVarying:_a,end:Ga,[Symbol.iterator]:Ya[Symbol.iterator]};function Xa(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Za={time:null,delay:0,duration:250,ease:Xa};function Qa(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw Error(`transition ${t} not found`);return n}function $a(e){var t,n;e instanceof qa?(t=e._id,e=e._name):(t=Ja(),(n=Za).time=yi(),e=e==null?null:e+``);for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,c,l=0;l<s;++l)(c=o[l])&&Ri(c,e,t,l,o,n||Qa(c,t));return new qa(r,this._parents,e,t)}Dn.prototype.interrupt=Wi,Dn.prototype.transition=$a;var eo=e=>()=>e;function to(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function no(e,t,n){this.k=e,this.x=t,this.y=n}no.prototype={constructor:no,scale:function(e){return e===1?this:new no(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new no(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return`translate(`+this.x+`,`+this.y+`) scale(`+this.k+`)`}};var ro=new no(1,0,0);no.prototype;function io(e){e.stopImmediatePropagation()}function ao(e){e.preventDefault(),e.stopImmediatePropagation()}function oo(e){return(!e.ctrlKey||e.type===`wheel`)&&!e.button}function so(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute(`viewBox`)?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function co(){return this.__zoom||ro}function lo(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function uo(){return navigator.maxTouchPoints||`ontouchstart`in this}function fo(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],a=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>a?(a+o)/2:Math.min(0,a)||Math.max(0,o))}function po(){var e=oo,t=so,n=fo,r=lo,i=uo,a=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],s=250,c=si,l=we(`start`,`zoom`,`end`),u,d,f,p=500,m=150,h=0,g=10;function _(e){e.property(`__zoom`,co).on(`wheel.zoom`,w,{passive:!1}).on(`mousedown.zoom`,T).on(`dblclick.zoom`,E).filter(i).on(`touchstart.zoom`,D).on(`touchmove.zoom`,O).on(`touchend.zoom touchcancel.zoom`,k).style(`-webkit-tap-highlight-color`,`rgba(0,0,0,0)`)}_.transform=function(e,t,n,r){var i=e.selection?e.selection():e;i.property(`__zoom`,co),e===i?i.interrupt().each(function(){S(this,arguments).event(r).start().zoom(null,typeof t==`function`?t.apply(this,arguments):t).end()}):x(e,t,n,r)},_.scaleBy=function(e,t,n,r){_.scaleTo(e,function(){return this.__zoom.k*(typeof t==`function`?t.apply(this,arguments):t)},n,r)},_.scaleTo=function(e,r,i,a){_.transform(e,function(){var e=t.apply(this,arguments),a=this.__zoom,s=i==null?b(e):typeof i==`function`?i.apply(this,arguments):i,c=a.invert(s),l=typeof r==`function`?r.apply(this,arguments):r;return n(y(v(a,l),s,c),e,o)},i,a)},_.translateBy=function(e,r,i,a){_.transform(e,function(){return n(this.__zoom.translate(typeof r==`function`?r.apply(this,arguments):r,typeof i==`function`?i.apply(this,arguments):i),t.apply(this,arguments),o)},null,a)},_.translateTo=function(e,r,i,a,s){_.transform(e,function(){var e=t.apply(this,arguments),s=this.__zoom,c=a==null?b(e):typeof a==`function`?a.apply(this,arguments):a;return n(ro.translate(c[0],c[1]).scale(s.k).translate(typeof r==`function`?-r.apply(this,arguments):-r,typeof i==`function`?-i.apply(this,arguments):-i),e,o)},a,s)};function v(e,t){return t=Math.max(a[0],Math.min(a[1],t)),t===e.k?e:new no(t,e.x,e.y)}function y(e,t,n){var r=t[0]-n[0]*e.k,i=t[1]-n[1]*e.k;return r===e.x&&i===e.y?e:new no(e.k,r,i)}function b(e){return[(+e[0][0]+ +e[1][0])/2,(+e[0][1]+ +e[1][1])/2]}function x(e,n,r,i){e.on(`start.zoom`,function(){S(this,arguments).event(i).start()}).on(`interrupt.zoom end.zoom`,function(){S(this,arguments).event(i).end()}).tween(`zoom`,function(){var e=this,a=arguments,o=S(e,a).event(i),s=t.apply(e,a),l=r==null?b(s):typeof r==`function`?r.apply(e,a):r,u=Math.max(s[1][0]-s[0][0],s[1][1]-s[0][1]),d=e.__zoom,f=typeof n==`function`?n.apply(e,a):n,p=c(d.invert(l).concat(u/d.k),f.invert(l).concat(u/f.k));return function(e){if(e===1)e=f;else{var t=p(e),n=u/t[2];e=new no(n,l[0]-t[0]*n,l[1]-t[1]*n)}o.zoom(null,e)}})}function S(e,t,n){return!n&&e.__zooming||new C(e,t)}function C(e,n){this.that=e,this.args=n,this.active=0,this.sourceEvent=null,this.extent=t.apply(e,n),this.taps=0}C.prototype={event:function(e){return e&&(this.sourceEvent=e),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit(`start`)),this},zoom:function(e,t){return this.mouse&&e!==`mouse`&&(this.mouse[1]=t.invert(this.mouse[0])),this.touch0&&e!==`touch`&&(this.touch0[1]=t.invert(this.touch0[0])),this.touch1&&e!==`touch`&&(this.touch1[1]=t.invert(this.touch1[0])),this.that.__zoom=t,this.emit(`zoom`),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit(`end`)),this},emit:function(e){var t=kn(this.that).datum();l.call(e,this.that,new to(e,{sourceEvent:this.sourceEvent,target:_,type:e,transform:this.that.__zoom,dispatch:l}),t)}};function w(t,...i){if(!e.apply(this,arguments))return;var s=S(this,i).event(t),c=this.__zoom,l=Math.max(a[0],Math.min(a[1],c.k*2**r.apply(this,arguments))),u=jn(t);if(s.wheel)(s.mouse[0][0]!==u[0]||s.mouse[0][1]!==u[1])&&(s.mouse[1]=c.invert(s.mouse[0]=u)),clearTimeout(s.wheel);else if(c.k===l)return;else s.mouse=[u,c.invert(u)],Ui(this),s.start();ao(t),s.wheel=setTimeout(d,m),s.zoom(`mouse`,n(y(v(c,l),s.mouse[0],s.mouse[1]),s.extent,o));function d(){s.wheel=null,s.end()}}function T(t,...r){if(f||!e.apply(this,arguments))return;var i=t.currentTarget,a=S(this,r,!0).event(t),s=kn(t.view).on(`mousemove.zoom`,d,!0).on(`mouseup.zoom`,p,!0),c=jn(t,i),l=t.clientX,u=t.clientY;In(t.view),io(t),a.mouse=[c,this.__zoom.invert(c)],Ui(this),a.start();function d(e){if(ao(e),!a.moved){var t=e.clientX-l,r=e.clientY-u;a.moved=t*t+r*r>h}a.event(e).zoom(`mouse`,n(y(a.that.__zoom,a.mouse[0]=jn(e,i),a.mouse[1]),a.extent,o))}function p(e){s.on(`mousemove.zoom mouseup.zoom`,null),Ln(e.view,a.moved),ao(e),a.event(e).end()}}function E(r,...i){if(e.apply(this,arguments)){var a=this.__zoom,c=jn(r.changedTouches?r.changedTouches[0]:r,this),l=a.invert(c),u=a.k*(r.shiftKey?.5:2),d=n(y(v(a,u),c,l),t.apply(this,i),o);ao(r),s>0?kn(this).transition().duration(s).call(x,d,c,r):kn(this).call(_.transform,d,c,r)}}function D(t,...n){if(e.apply(this,arguments)){var r=t.touches,i=r.length,a=S(this,n,t.changedTouches.length===i).event(t),o,s,c,l;for(io(t),s=0;s<i;++s)c=r[s],l=jn(c,this),l=[l,this.__zoom.invert(l),c.identifier],a.touch0?!a.touch1&&a.touch0[2]!==l[2]&&(a.touch1=l,a.taps=0):(a.touch0=l,o=!0,a.taps=1+!!u);u&&=clearTimeout(u),o&&(a.taps<2&&(d=l[0],u=setTimeout(function(){u=null},p)),Ui(this),a.start())}}function O(e,...t){if(this.__zooming){var r=S(this,t).event(e),i=e.changedTouches,a=i.length,s,c,l,u;for(ao(e),s=0;s<a;++s)c=i[s],l=jn(c,this),r.touch0&&r.touch0[2]===c.identifier?r.touch0[0]=l:r.touch1&&r.touch1[2]===c.identifier&&(r.touch1[0]=l);if(c=r.that.__zoom,r.touch1){var d=r.touch0[0],f=r.touch0[1],p=r.touch1[0],m=r.touch1[1],h=(h=p[0]-d[0])*h+(h=p[1]-d[1])*h,g=(g=m[0]-f[0])*g+(g=m[1]-f[1])*g;c=v(c,Math.sqrt(h/g)),l=[(d[0]+p[0])/2,(d[1]+p[1])/2],u=[(f[0]+m[0])/2,(f[1]+m[1])/2]}else if(r.touch0)l=r.touch0[0],u=r.touch0[1];else return;r.zoom(`touch`,n(y(c,l,u),r.extent,o))}}function k(e,...t){if(this.__zooming){var n=S(this,t).event(e),r=e.changedTouches,i=r.length,a,o;for(io(e),f&&clearTimeout(f),f=setTimeout(function(){f=null},p),a=0;a<i;++a)o=r[a],n.touch0&&n.touch0[2]===o.identifier?delete n.touch0:n.touch1&&n.touch1[2]===o.identifier&&delete n.touch1;if(n.touch1&&!n.touch0&&(n.touch0=n.touch1,delete n.touch1),n.touch0)n.touch0[1]=this.__zoom.invert(n.touch0[0]);else if(n.end(),n.taps===2&&(o=jn(o,this),Math.hypot(d[0]-o[0],d[1]-o[1])<g)){var s=kn(this).on(`dblclick.zoom`);s&&s.apply(this,arguments)}}}return _.wheelDelta=function(e){return arguments.length?(r=typeof e==`function`?e:eo(+e),_):r},_.filter=function(t){return arguments.length?(e=typeof t==`function`?t:eo(!!t),_):e},_.touchable=function(e){return arguments.length?(i=typeof e==`function`?e:eo(!!e),_):i},_.extent=function(e){return arguments.length?(t=typeof e==`function`?e:eo([[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]]),_):t},_.scaleExtent=function(e){return arguments.length?(a[0]=+e[0],a[1]=+e[1],_):[a[0],a[1]]},_.translateExtent=function(e){return arguments.length?(o[0][0]=+e[0][0],o[1][0]=+e[1][0],o[0][1]=+e[0][1],o[1][1]=+e[1][1],_):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},_.constrain=function(e){return arguments.length?(n=e,_):n},_.duration=function(e){return arguments.length?(s=+e,_):s},_.interpolate=function(e){return arguments.length?(c=e,_):c},_.on=function(){var e=l.on.apply(l,arguments);return e===l?_:e},_.clickDistance=function(e){return arguments.length?(h=(e=+e)*e,_):Math.sqrt(h)},_.tapDistance=function(e){return arguments.length?(g=+e,_):g},_}var J=(e=>(e.Left=`left`,e.Top=`top`,e.Right=`right`,e.Bottom=`bottom`,e))(J||{}),mo=(e=>(e.Partial=`partial`,e.Full=`full`,e))(mo||{}),ho=(e=>(e.Bezier=`default`,e.SimpleBezier=`simple-bezier`,e.Straight=`straight`,e.Step=`step`,e.SmoothStep=`smoothstep`,e))(ho||{}),go=(e=>(e.Strict=`strict`,e.Loose=`loose`,e))(go||{}),_o=(e=>(e.Arrow=`arrow`,e.ArrowClosed=`arrowclosed`,e))(_o||{}),vo=(e=>(e.Free=`free`,e.Vertical=`vertical`,e.Horizontal=`horizontal`,e))(vo||{}),yo=[`INPUT`,`SELECT`,`TEXTAREA`],bo=typeof document<`u`?document:null;function xo(e){let t=e.composedPath?.call(e)?.[0]||e.target,n=typeof t?.hasAttribute==`function`?t.hasAttribute(`contenteditable`):!1,r=typeof t?.closest==`function`?t.closest(`.nokey`):null;return yo.includes(t?.nodeName)||n||!!r}function So(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function Co(e,t,n,r){let i=t.replace(`+`,`
`).replace(`

`,`
+`).split(`
`).map(e=>e.trim().toLowerCase());if(i.length===1)return e.toLowerCase()===t.toLowerCase();r||n.add(e.toLowerCase());let a=i.every((e,t)=>n.has(e)&&Array.from(n.values())[t]===i[t]);return r&&n.delete(e.toLowerCase()),a}function wo(e,t){return n=>{if(!n.code&&!n.key)return!1;let r=To(n.code,e);return Array.isArray(e)?e.some(e=>Co(n[r],e,t,n.type===`keyup`)):Co(n[r],e,t,n.type===`keyup`)}}function To(e,t){return t.includes(e)?`code`:`key`}function Eo(e,t){let n=z(()=>s(t?.target)??bo),r=ee(s(e)===!0),a=!1,o=new Set,c=u(s(e));i(()=>s(e),(e,t)=>{typeof t==`boolean`&&typeof e!=`boolean`&&l(),c=u(e)},{immediate:!0}),ve([`blur`,`contextmenu`],l),be((...e)=>c(...e),e=>{let n=s(t?.actInsideInputWithModifier)??!0,i=s(t?.preventDefault)??!1;if(a=So(e),(!a||a&&!n)&&xo(e))return;let o=e.composedPath?.call(e)?.[0]||e.target,c=o?.nodeName===`BUTTON`||o?.nodeName===`A`;!i&&(a||!c)&&e.preventDefault(),r.value=!0},{eventName:`keydown`,target:n}),be((...e)=>c(...e),e=>{let n=s(t?.actInsideInputWithModifier)??!0;if(r.value){if((!a||a&&!n)&&xo(e))return;a=!1,r.value=!1}},{eventName:`keyup`,target:n});function l(){a=!1,o.clear(),r.value=s(e)===!0}function u(e){return e===null?(l(),()=>!1):typeof e==`boolean`?(l(),r.value=e,()=>!1):Array.isArray(e)||typeof e==`string`?wo(e,o):e}return r}var Do=`vue-flow__node-desc`,Oo=`vue-flow__edge-desc`,ko=`vue-flow__aria-live`,Ao=[`Enter`,` `,`Escape`],jo={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};function Mo(e){return{...e.computedPosition||{x:0,y:0},width:e.dimensions.width||0,height:e.dimensions.height||0}}function No(e,t){let n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)}function Po(e){return{width:e.offsetWidth,height:e.offsetHeight}}function Fo(e,t=0,n=1){return Math.min(Math.max(e,t),n)}function Io(e,t){return{x:Fo(e.x,t[0][0],t[1][0]),y:Fo(e.y,t[0][1],t[1][1])}}function Lo(e){let t=e.getRootNode();return`elementFromPoint`in t?t:window.document}function Ro(e){return e&&typeof e==`object`&&`id`in e&&`source`in e&&`target`in e}function zo(e){return e&&typeof e==`object`&&`id`in e&&`position`in e&&!Ro(e)}function Bo(e){return zo(e)&&`computedPosition`in e}function Vo(e){return!Number.isNaN(e)&&Number.isFinite(e)}function Ho(e){return Vo(e.width)&&Vo(e.height)&&Vo(e.x)&&Vo(e.y)}function Uo(e,t,n){let r={id:e.id.toString(),type:e.type??`default`,dimensions:m({width:0,height:0}),computedPosition:m({z:0,...e.position}),handleBounds:{source:[],target:[]},draggable:void 0,selectable:void 0,connectable:void 0,focusable:void 0,selected:!1,dragging:!1,resizing:!1,initialized:!1,isParent:!1,position:{x:0,y:0},data:Q(e.data)?e.data:{},events:m(Q(e.events)?e.events:{})};return Object.assign(t??r,e,{id:e.id.toString(),parentNode:n})}function Wo(e,t,n){let r={id:e.id.toString(),type:e.type??t?.type??`default`,source:e.source.toString(),target:e.target.toString(),sourceHandle:e.sourceHandle?.toString(),targetHandle:e.targetHandle?.toString(),updatable:e.updatable??n?.updatable,selectable:e.selectable??n?.selectable,focusable:e.focusable??n?.focusable,data:Q(e.data)?e.data:{},events:m(Q(e.events)?e.events:{}),label:e.label??``,interactionWidth:e.interactionWidth??n?.interactionWidth,...n??{}};return Object.assign(t??r,e,{id:e.id.toString()})}function Go(e,t,n,r){let i=typeof e==`string`?e:e.id,a=new Set,o=r===`source`?`target`:`source`;for(let e of n)e[o]===i&&a.add(e[r]);return t.filter(e=>a.has(e.id))}function Ko(...e){if(e.length===3){let[t,n,r]=e;return Go(t,n,r,`target`)}let[t,n]=e,r=typeof t==`string`?t:t.id;return n.filter(e=>Ro(e)&&e.source===r).map(e=>n.find(t=>zo(t)&&t.id===e.target))}function qo(...e){if(e.length===3){let[t,n,r]=e;return Go(t,n,r,`source`)}let[t,n]=e,r=typeof t==`string`?t:t.id;return n.filter(e=>Ro(e)&&e.target===r).map(e=>n.find(t=>zo(t)&&t.id===e.source))}function Jo({source:e,sourceHandle:t,target:n,targetHandle:r}){return`vueflow__edge-${e}${t??``}-${n}${r??``}`}function Yo(e,t){return t.some(t=>Ro(t)&&t.source===e.source&&t.target===e.target&&(t.sourceHandle===e.sourceHandle||!t.sourceHandle&&!e.sourceHandle)&&(t.targetHandle===e.targetHandle||!t.targetHandle&&!e.targetHandle))}function Xo({x:e,y:t},{x:n,y:r,zoom:i}){return{x:e*i+n,y:t*i+r}}function Zo({x:e,y:t},{x:n,y:r,zoom:i},a=!1,o=[1,1]){let s={x:(e-n)/i,y:(t-r)/i};return a?Bs(s,o):s}function Qo(e,t){return{x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}}function $o({x:e,y:t,width:n,height:r}){return{x:e,y:t,x2:e+n,y2:t+r}}function es({x:e,y:t,x2:n,y2:r}){return{x:e,y:t,width:n-e,height:r-t}}function ts(e){let t={x:1/0,y:1/0,x2:-1/0,y2:-1/0};for(let n=0;n<e.length;n++){let r=e[n];t=Qo(t,$o({...r.computedPosition,...r.dimensions}))}return es(t)}function ns(e,t,n={x:0,y:0,zoom:1},r=!1,i=!1){let a={...Zo(t,n),width:t.width/n.zoom,height:t.height/n.zoom},o=[];for(let t of e){let{dimensions:e,selectable:n=!0,hidden:s=!1}=t,c=e.width??t.width??null,l=e.height??t.height??null;if(i&&!n||s)continue;let u=No(a,Mo(t)),d=c===null||l===null,f=r&&u>0,p=(c??0)*(l??0);(d||f||u>=p||t.dragging)&&o.push(t)}return o}function rs(e,t){let n=new Set;if(typeof e==`string`)n.add(e);else if(e.length>=1)for(let t of e)n.add(t.id);return t.filter(e=>n.has(e.source)||n.has(e.target))}function is(e,t){if(typeof e==`number`)return Math.floor((t-t/(1+e))*.5);if(typeof e==`string`&&e.endsWith(`px`)){let t=Number.parseFloat(e);if(!Number.isNaN(t))return Math.floor(t)}if(typeof e==`string`&&e.endsWith(`%`)){let n=Number.parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return $s(`The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function as(e,t,n){if(typeof e==`string`||typeof e==`number`){let r=is(e,n),i=is(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e==`object`){let r=is(e.top??e.y??0,n),i=is(e.bottom??e.y??0,n),a=is(e.left??e.x??0,t),o=is(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:a,x:a+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function os(e,t,n,r,i,a){let{x:o,y:s}=Xo(e,{x:t,y:n,zoom:r}),{x:c,y:l}=Xo({x:e.x+e.width,y:e.y+e.height},{x:t,y:n,zoom:r}),u=i-c,d=a-l;return{left:Math.floor(o),top:Math.floor(s),right:Math.floor(u),bottom:Math.floor(d)}}function ss(e,t,n,r,i,a=.1){let o=as(a,t,n),s=(t-o.x)/e.width,c=(n-o.y)/e.height,l=Fo(Math.min(s,c),r,i),u=e.x+e.width/2,d=e.y+e.height/2,f=t/2-u*l,p=n/2-d*l,m=os(e,f,p,l,t,n),h={left:Math.min(m.left-o.left,0),top:Math.min(m.top-o.top,0),right:Math.min(m.right-o.right,0),bottom:Math.min(m.bottom-o.bottom,0)};return{x:f-h.left+h.right,y:p-h.top+h.bottom,zoom:l}}function cs(e,t){return{x:t.x+e.x,y:t.y+e.y,z:(e.z>t.z?e.z:t.z)+1}}function ls(e,t){if(!e.parentNode)return!1;let n=t.get(e.parentNode);return n?n.selected?!0:ls(n,t):!1}function us(e,t){return e===void 0?``:typeof e==`string`?e:`${t?`${t}__`:``}${Object.keys(e).sort().map(t=>`${t}=${e[t]}`).join(`&`)}`}function ds(e){let t=e.ctrlKey&&Rs()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t}function fs(e,t,n){return e<t?Fo(Math.abs(e-t),1,t)/t:e>n?-Fo(Math.abs(e-n),1,t)/t:0}function ps(e,t,n=15,r=40){return[fs(e.x,r,t.width-r)*n,fs(e.y,r,t.height-r)*n]}function ms(e,t){if(t){let n=e.position.x+e.dimensions.width-t.dimensions.width,r=e.position.y+e.dimensions.height-t.dimensions.height;if(n>0||r>0||e.position.x<0||e.position.y<0){let i={};if(typeof t.style==`function`?i={...t.style(t)}:t.style&&(i={...t.style}),i.width=i.width??`${t.dimensions.width}px`,i.height=i.height??`${t.dimensions.height}px`,n>0&&(typeof i.width==`string`?i.width=`${Number(i.width.replace(`px`,``))+n}px`:i.width+=n),r>0&&(typeof i.height==`string`?i.height=`${Number(i.height.replace(`px`,``))+r}px`:i.height+=r),e.position.x<0){let n=Math.abs(e.position.x);t.position.x=t.position.x-n,typeof i.width==`string`?i.width=`${Number(i.width.replace(`px`,``))+n}px`:i.width+=n,e.position.x=0}if(e.position.y<0){let n=Math.abs(e.position.y);t.position.y=t.position.y-n,typeof i.height==`string`?i.height=`${Number(i.height.replace(`px`,``))+n}px`:i.height+=n,e.position.y=0}t.dimensions.width=Number(i.width.toString().replace(`px`,``)),t.dimensions.height=Number(i.height.toString().replace(`px`,``)),typeof t.style==`function`?t.style=e=>{let n=t.style;return{...n(e),...i}}:t.style={...t.style,...i}}}}function hs(e,t){let n=e.filter(e=>e.type===`add`||e.type===`remove`);for(let e of n)if(e.type===`add`)t.findIndex(t=>t.id===e.item.id)===-1&&t.push(e.item);else if(e.type===`remove`){let n=t.findIndex(t=>t.id===e.id);n!==-1&&t.splice(n,1)}let r=t.map(e=>e.id);for(let n of t)for(let i of e)if(i.id===n.id)switch(i.type){case`select`:n.selected=i.selected;break;case`position`:if(Bo(n)&&(i.position!==void 0&&(n.position=i.position),i.dragging!==void 0&&(n.dragging=i.dragging),n.expandParent&&n.parentNode)){let e=t[r.indexOf(n.parentNode)];e&&Bo(e)&&ms(n,e)}break;case`dimensions`:if(Bo(n)&&(i.dimensions!==void 0&&(n.dimensions=i.dimensions),i.updateStyle!==void 0&&i.updateStyle&&(n.style={...n.style||{},width:`${i.dimensions?.width}px`,height:`${i.dimensions?.height}px`}),i.resizing!==void 0&&(n.resizing=i.resizing),n.expandParent&&n.parentNode)){let e=t[r.indexOf(n.parentNode)];e&&Bo(e)&&(e.dimensions.width&&e.dimensions.height?ms(n,e):O(()=>{ms(n,e)}))}break}return t}function gs(e,t){return{id:e,type:`select`,selected:t}}function _s(e){return{item:e,type:`add`}}function vs(e){return{id:e,type:`remove`}}function ys(e,t,n,r,i){return{id:e,source:t,target:n,sourceHandle:r||null,targetHandle:i||null,type:`remove`}}function bs(e,t=new Set,n=!1){let r=[];for(let[i,a]of e){let e=t.has(i);!(a.selected===void 0&&!e)&&a.selected!==e&&(n&&(a.selected=e),r.push(gs(a.id,e)))}return r}var xs=()=>{};function Y(e){let t=new Set,n=xs,r=()=>!1,i=()=>t.size>0||r(),a=e=>{n=e},o=()=>{n=xs},s=e=>{r=e},c=()=>{r=()=>!1},l=e=>{t.delete(e)};return{on:e=>{t.add(e);let n=()=>l(e);return te(n),{off:n}},off:l,trigger:r=>{let a=[n];return i()?a.push(...t):e&&a.push(e),Promise.allSettled(a.map(e=>e(r)))},hasListeners:i,listeners:t,setEmitter:a,removeEmitter:o,setHasEmitListeners:s,removeHasEmitListeners:c}}function Ss(e,t,n){let r=e;do{if(r&&r.matches(t))return!0;if(r===n)return!1;r=r.parentElement}while(r);return!1}function Cs(e,t,n,r){let i=new Map;for(let[a,o]of e)(o.selected||o.id===r)&&(!o.parentNode||!ls(o,e))&&(o.draggable||t&&o.draggable===void 0)&&e.get(a)&&i.set(a,{id:o.id,position:o.position||{x:0,y:0},distance:{x:n.x-o.computedPosition?.x||0,y:n.y-o.computedPosition?.y||0},from:{x:o.computedPosition.x,y:o.computedPosition.y},extent:o.extent,parentNode:o.parentNode,dimensions:{...o.dimensions},expandParent:o.expandParent});return Array.from(i.values())}function ws({id:e,dragItems:t,findNode:n}){let r=[];for(let e of t){let t=n(e.id);t&&r.push(t)}return[e?r.find(t=>t.id===e):r[0],r]}function Ts(e){if(Array.isArray(e))switch(e.length){case 1:return[e[0],e[0],e[0],e[0]];case 2:return[e[0],e[1],e[0],e[1]];case 3:return[e[0],e[1],e[2],e[1]];case 4:return e;default:return[0,0,0,0]}return[e,e,e,e]}function Es(e,t,n){let[r,i,a,o]=typeof e==`string`?[0,0,0,0]:Ts(e.padding);return n&&n.computedPosition.x!==void 0&&n.computedPosition.y!==void 0&&n.dimensions.width!==void 0&&n.dimensions.height!==void 0?[[n.computedPosition.x+o,n.computedPosition.y+r],[n.computedPosition.x+n.dimensions.width-i,n.computedPosition.y+n.dimensions.height-a]]:!1}function Ds(e,t,n,r){let i=e.extent||n;if((i===`parent`||!Array.isArray(i)&&i?.range===`parent`)&&!e.expandParent)if(e.parentNode&&r&&e.dimensions.width&&e.dimensions.height){let t=Es(i,e,r);t&&(i=t)}else t(new Z(X.NODE_EXTENT_INVALID,e.id)),i=n;else if(Array.isArray(i)){let e=r?.computedPosition.x||0,t=r?.computedPosition.y||0;i=[[i[0][0]+e,i[0][1]+t],[i[1][0]+e,i[1][1]+t]]}else if(i!==`parent`&&i?.range&&Array.isArray(i.range)){let[e,t,n,a]=Ts(i.padding),o=r?.computedPosition.x||0,s=r?.computedPosition.y||0;i=[[i.range[0][0]+o+a,i.range[0][1]+s+e],[i.range[1][0]+o-t,i.range[1][1]+s-n]]}return i===`parent`?[[-1/0,-1/0],[1/0,1/0]]:i}function Os({width:e,height:t},n){return[n[0],[n[1][0]-(e||0),n[1][1]-(t||0)]]}function ks(e,t,n,r,i){let a=Io(t,Os(e.dimensions,Ds(e,n,r,i)));return{position:{x:a.x-(i?.computedPosition.x||0),y:a.y-(i?.computedPosition.y||0)},computedPosition:a}}function As(e,t,n=J.Left,r=!1){let i=(t?.x??0)+e.computedPosition.x,a=(t?.y??0)+e.computedPosition.y,{width:o,height:s}=t??zs(e);if(r)return{x:i+o/2,y:a+s/2};switch(t?.position??n){case J.Top:return{x:i+o/2,y:a};case J.Right:return{x:i+o,y:a+s/2};case J.Bottom:return{x:i+o/2,y:a+s};case J.Left:return{x:i,y:a+s/2}}}function js(e,t){return e&&(t?e.find(e=>e.id===t):e[0])||null}function Ms({sourcePos:e,targetPos:t,sourceWidth:n,sourceHeight:r,targetWidth:i,targetHeight:a,width:o,height:s,viewport:c}){let l={x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x+n,t.x+i),y2:Math.max(e.y+r,t.y+a)};l.x===l.x2&&(l.x2+=1),l.y===l.y2&&(l.y2+=1);let u=$o({x:(0-c.x)/c.zoom,y:(0-c.y)/c.zoom,width:o/c.zoom,height:s/c.zoom}),d=Math.max(0,Math.min(u.x2,l.x2)-Math.max(u.x,l.x)),f=Math.max(0,Math.min(u.y2,l.y2)-Math.max(u.y,l.y));return Math.ceil(d*f)>0}function Ns(e,t,n=!1){let r=typeof e.zIndex==`number`,i=r?e.zIndex:0,a=t(e.source),o=t(e.target);return!a||!o?0:(n&&(i=r?e.zIndex:Math.max(a.computedPosition.z||0,o.computedPosition.z||0)),i)}var X=(e=>(e.MISSING_STYLES=`MISSING_STYLES`,e.MISSING_VIEWPORT_DIMENSIONS=`MISSING_VIEWPORT_DIMENSIONS`,e.NODE_INVALID=`NODE_INVALID`,e.NODE_NOT_FOUND=`NODE_NOT_FOUND`,e.NODE_MISSING_PARENT=`NODE_MISSING_PARENT`,e.NODE_TYPE_MISSING=`NODE_TYPE_MISSING`,e.NODE_EXTENT_INVALID=`NODE_EXTENT_INVALID`,e.EDGE_INVALID=`EDGE_INVALID`,e.EDGE_NOT_FOUND=`EDGE_NOT_FOUND`,e.EDGE_SOURCE_MISSING=`EDGE_SOURCE_MISSING`,e.EDGE_TARGET_MISSING=`EDGE_TARGET_MISSING`,e.EDGE_TYPE_MISSING=`EDGE_TYPE_MISSING`,e.EDGE_SOURCE_TARGET_SAME=`EDGE_SOURCE_TARGET_SAME`,e.EDGE_SOURCE_TARGET_MISSING=`EDGE_SOURCE_TARGET_MISSING`,e.EDGE_ORPHANED=`EDGE_ORPHANED`,e.USEVUEFLOW_OPTIONS=`USEVUEFLOW_OPTIONS`,e))(X||{}),Ps={MISSING_STYLES:()=>`It seems that you haven't loaded the necessary styles. Please import '@vue-flow/core/dist/style.css' to ensure that the graph is rendered correctly`,MISSING_VIEWPORT_DIMENSIONS:()=>`The Vue Flow parent container needs a width and a height to render the graph`,NODE_INVALID:e=>`Node is invalid
Node: ${e}`,NODE_NOT_FOUND:e=>`Node not found
Node: ${e}`,NODE_MISSING_PARENT:(e,t)=>`Node is missing a parent
Node: ${e}
Parent: ${t}`,NODE_TYPE_MISSING:e=>`Node type is missing
Type: ${e}`,NODE_EXTENT_INVALID:e=>`Only child nodes can use a parent extent
Node: ${e}`,EDGE_INVALID:e=>`An edge needs a source and a target
Edge: ${e}`,EDGE_SOURCE_MISSING:(e,t)=>`Edge source is missing
Edge: ${e} 
Source: ${t}`,EDGE_TARGET_MISSING:(e,t)=>`Edge target is missing
Edge: ${e} 
Target: ${t}`,EDGE_TYPE_MISSING:e=>`Edge type is missing
Type: ${e}`,EDGE_SOURCE_TARGET_SAME:(e,t,n)=>`Edge source and target are the same
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_SOURCE_TARGET_MISSING:(e,t,n)=>`Edge source or target is missing
Edge: ${e} 
Source: ${t} 
Target: ${n}`,EDGE_ORPHANED:e=>`Edge was orphaned (suddenly missing source or target) and has been removed
Edge: ${e}`,EDGE_NOT_FOUND:e=>`Edge not found
Edge: ${e}`,USEVUEFLOW_OPTIONS:()=>`The options parameter is deprecated and will be removed in the next major version. Please use the id parameter instead`},Z=class extends Error{constructor(e,...t){super(Ps[e]?.call(Ps,...t)),this.name=`VueFlowError`,this.code=e,this.args=t}};function Fs(e){return`clientX`in e}function Is(e){return`sourceEvent`in e}function Ls(e,t){let n=Fs(e),r,i;return n?(r=e.clientX,i=e.clientY):`touches`in e&&e.touches.length>0?(r=e.touches[0].clientX,i=e.touches[0].clientY):`changedTouches`in e&&e.changedTouches.length>0?(r=e.changedTouches[0].clientX,i=e.changedTouches[0].clientY):(r=0,i=0),{x:r-(t?.left??0),y:i-(t?.top??0)}}var Rs=()=>typeof navigator<`u`&&(navigator==null?void 0:navigator.userAgent)?.indexOf(`Mac`)>=0;function zs(e){return{width:e.dimensions?.width??e.width??0,height:e.dimensions?.height??e.height??0}}function Bs(e,t=[1,1]){return{x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}}var Vs=()=>!0;function Hs(e){e?.classList.remove(`valid`,`connecting`,`vue-flow__handle-valid`,`vue-flow__handle-connecting`)}function Us(e,t,n){let r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(let e of t.values())No(i,Mo(e))>0&&r.push(e);return r}var Ws=250;function Gs(e,t,n,r){let i=[],a=1/0,o=Us(e,n,t+Ws);for(let n of o){let o=[...n.handleBounds?.source??[],...n.handleBounds?.target??[]];for(let s of o){if(r.nodeId===s.nodeId&&r.type===s.type&&r.id===s.id)continue;let{x:o,y:c}=As(n,s,s.position,!0),l=Math.sqrt((o-e.x)**2+(c-e.y)**2);l>t||(l<a?(i=[{...s,x:o,y:c}],a=l):l===a&&i.push({...s,x:o,y:c}))}}if(!i.length)return null;if(i.length>1){let e=r.type===`source`?`target`:`source`;return i.find(t=>t.type===e)??i[0]}return i[0]}function Ks(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:a,doc:o,lib:s,flowId:c,isValidConnection:l=Vs},u,d,f,p){let m=a===`target`,h=t?o.querySelector(`.${s}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:g,y:_}=Ls(e),v=o.elementFromPoint(g,_),y=v?.classList.contains(`${s}-flow__handle`)?v:h,b={handleDomNode:y,isValid:!1,connection:null,toHandle:null};if(y){let e=qs(void 0,y),t=y.getAttribute(`data-nodeid`),a=y.getAttribute(`data-handleid`),o=y.classList.contains(`connectable`),s=y.classList.contains(`connectableend`);if(!t||!e)return b;let c={source:m?t:r,sourceHandle:m?a:i,target:m?r:t,targetHandle:m?i:a};b.connection=c,b.isValid=o&&s&&(n===go.Strict?m&&e===`source`||!m&&e===`target`:t!==r||a!==i)&&l(c,{nodes:d,edges:u,sourceNode:f(c.source),targetNode:f(c.target)}),b.toHandle=Xs(t,e,a,p,n,!0)}return b}function qs(e,t){return e||(t?.classList.contains(`target`)?`target`:t?.classList.contains(`source`)?`source`:null)}function Js(e,t){let n=null;return t?n=`valid`:e&&!t&&(n=`invalid`),n}function Ys(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}function Xs(e,t,n,r,i,a=!1){let o=r.get(e);if(!o)return null;let s=i===go.Strict?o.handleBounds?.[t]:[...o.handleBounds?.source??[],...o.handleBounds?.target??[]],c=(n?s?.find(e=>e.id===n):s?.[0])??null;return c&&a?{...c,...As(o,c,c.position,!0)}:c}var Zs={[J.Left]:J.Right,[J.Right]:J.Left,[J.Top]:J.Bottom,[J.Bottom]:J.Top},Qs=[`production`,`prod`];function $s(e,...t){ec()&&console.warn(`[Vue Flow]: ${e}`,...t)}function ec(){return!Qs.includes(`production`)}function tc(e,t,n,r,i){let a=t.querySelectorAll(`.vue-flow__handle.${e}`);return a?.length?Array.from(a).map(t=>{let a=t.getBoundingClientRect();return{id:t.getAttribute(`data-handleid`),type:e,nodeId:i,position:t.getAttribute(`data-handlepos`),x:(a.left-n.left)/r,y:(a.top-n.top)/r,...Po(t)}}):null}function nc(e,t,n,r,i,a=!1,o){i.value=!1,e.selected?(a||e.selected&&t)&&(r([e]),O(()=>{o.blur()})):n([e])}function Q(e){return y(e)!==void 0}function rc(e,t,n,r){if(!e||!e.source||!e.target)return n(new Z(X.EDGE_INVALID,e?.id??`[ID UNKNOWN]`)),!1;let i;return i=Ro(e)?e:{...e,id:Jo(e)},i=Wo(i,void 0,r),Yo(i,t)?!1:i}function ic(e,t,n,r,i){if(!t.source||!t.target)return i(new Z(X.EDGE_INVALID,e.id)),!1;if(!n)return i(new Z(X.EDGE_NOT_FOUND,e.id)),!1;let{id:a,...o}=e;return{...o,id:r?Jo(t):a,source:t.source,target:t.target,sourceHandle:t.sourceHandle,targetHandle:t.targetHandle}}function ac(e,t,n){let r={},i=[];for(let a=0;a<e.length;++a){let o=e[a];if(!zo(o)){n(new Z(X.NODE_INVALID,o?.id));continue}let s=Uo(o,t(o.id),o.parentNode);o.parentNode&&(r[o.parentNode]=!0),i[a]=s}for(let e of i){let a=t(e.parentNode)||i.find(t=>t.id===e.parentNode);e.parentNode&&!a&&n(new Z(X.NODE_MISSING_PARENT,e.id,e.parentNode)),(e.parentNode||r[e.id])&&(r[e.id]&&(e.isParent=!0),a&&(a.isParent=!0))}return i}function oc(e,t,n,r,i,a){let o=i,s=r.get(o)||new Map;r.set(o,s.set(n,t)),o=`${i}-${e}`;let c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),a){o=`${i}-${e}-${a}`;let s=r.get(o)||new Map;r.set(o,s.set(n,t))}}function sc(e,t,n){e.clear();for(let t of n){let{source:n,target:r,sourceHandle:i=null,targetHandle:a=null}=t,o={edgeId:t.id,source:n,target:r,sourceHandle:i,targetHandle:a},s=`${n}-${i}--${r}-${a}`;oc(`source`,o,`${r}-${a}--${n}-${i}`,e,n,i),oc(`target`,o,s,e,r,a)}}function cc(e,t,n){if(!n)return;let r=[];for(let n of e.keys())t.has(n)||r.push(e.get(n));r.length&&n(r)}function lc(e,t){if(!e&&!t)return!0;if(!e||!t||e.size!==t.size)return!1;if(!e.size&&!t.size)return!0;for(let n of e.keys())if(!t.has(n))return!1;return!0}function uc(e,t){if(e.size!==t.size)return!1;for(let n of e)if(!t.has(n))return!1;return!0}function dc(e,t,n,r,i,a,o,s){let c=[];for(let l of e){let e=Ro(l)?l:rc(l,s,i,a);if(!e)continue;let u=n(e.source),d=n(e.target);if(!u||!d){i(new Z(X.EDGE_SOURCE_TARGET_MISSING,e.id,e.source,e.target));continue}if(!u){i(new Z(X.EDGE_SOURCE_MISSING,e.id,e.source));continue}if(!d){i(new Z(X.EDGE_TARGET_MISSING,e.id,e.target));continue}if(t&&!t(e,{edges:s,nodes:o,sourceNode:u,targetNode:d})){i(new Z(X.EDGE_INVALID,e.id));continue}let f=r(e.id);c.push({...Wo(e,f,a),sourceNode:u,targetNode:d})}return c}var fc=Symbol(`vueFlow`),pc=Symbol(`nodeId`),mc=Symbol(`nodeRef`),hc=Symbol(`edgeId`),gc=Symbol(`edgeRef`),_c=Symbol(`slots`);function vc(e){let{vueFlowRef:t,snapToGrid:n,snapGrid:r,noDragClassName:a,nodeLookup:o,nodeExtent:c,nodeDragThreshold:l,viewport:u,autoPanOnNodeDrag:d,autoPanSpeed:f,nodesDraggable:p,panBy:m,findNode:h,multiSelectionActive:g,nodesSelectionActive:_,selectNodesOnDrag:v,removeSelectedElements:y,addSelectedNodes:b,updateNodePositions:x,emits:S}=$(),{onStart:C,onDrag:w,onStop:T,onClick:E,el:D,disabled:O,id:k,selectable:A,dragHandle:j}=e,M=ee(!1),N=[],P,F=null,I={x:void 0,y:void 0},L={x:0,y:0},R=null,z=!1,B=!1,V=0,H=!1,U=xc(),W=({x:e,y:t})=>{I={x:e,y:t};let i=!1;if(N=N.map(a=>{let o={x:e-a.distance.x,y:t-a.distance.y},{computedPosition:s}=ks(a,n.value?Bs(o,r.value):o,S.error,c.value,a.parentNode?h(a.parentNode):void 0);return i=i||a.position.x!==s.x||a.position.y!==s.y,a.position=s,a}),B||=i,i&&(x(N,!0,!0),M.value=!0,R)){let[e,t]=ws({id:k,dragItems:N,findNode:h});w({event:R,node:e,nodes:t})}},G=()=>{if(!F)return;let[e,t]=ps(L,F,f.value);if(e!==0||t!==0){let n={x:(I.x??0)-e/u.value.zoom,y:(I.y??0)-t/u.value.zoom};m({x:e,y:t})&&W(n)}V=requestAnimationFrame(G)},K=(e,t)=>{z=!0;let n=h(k);!v.value&&!g.value&&n&&(n.selected||y()),n&&s(A)&&v.value&&nc(n,g.value,b,y,_,!1,t);let r=U(e.sourceEvent);if(I=r,N=Cs(o.value,p.value,r,k),N.length){let[t,n]=ws({id:k,dragItems:N,findNode:h});C({event:e.sourceEvent,node:t,nodes:n})}},te=(e,n)=>{e.sourceEvent.type===`touchmove`&&e.sourceEvent.touches.length>1||(B=!1,l.value===0&&K(e,n),I=U(e.sourceEvent),F=t.value?.getBoundingClientRect()||null,L=Ls(e.sourceEvent,F))},q=(e,t)=>{let n=U(e.sourceEvent);if(!H&&z&&d.value&&(H=!0,G()),!z){let r=n.xSnapped-(I.x??0),i=n.ySnapped-(I.y??0);Math.sqrt(r*r+i*i)>l.value&&K(e,t)}(I.x!==n.xSnapped||I.y!==n.ySnapped)&&N.length&&z&&(R=e.sourceEvent,L=Ls(e.sourceEvent,F),W(n))},ne=e=>{let t=!1;if(!z&&!M.value&&!g.value){let n=e.sourceEvent,r=U(n),i=r.xSnapped-(I.x??0),a=r.ySnapped-(I.y??0),o=Math.sqrt(i*i+a*a);o!==0&&o<=l.value&&(E?.(n),t=!0)}if(N.length&&!t){B&&=(x(N,!1,!1),!1);let[t,n]=ws({id:k,dragItems:N,findNode:h});T({event:e.sourceEvent,node:t,nodes:n})}N=[],M.value=!1,H=!1,z=!1,I={x:void 0,y:void 0},cancelAnimationFrame(V)};return i([()=>s(O),D],([e,t],n,r)=>{if(t){let n=kn(t);e||(P=Wn().on(`start`,e=>te(e,t)).on(`drag`,e=>q(e,t)).on(`end`,e=>ne(e)).filter(e=>{let n=e.target,r=s(j);return!e.button&&(!a.value||!Ss(n,`.${a.value}`,t)&&(!r||Ss(n,r,t)))}),n.call(P)),r(()=>{n.on(`.drag`,null),P&&(P.on(`start`,null),P.on(`drag`,null),P.on(`end`,null))})}}),M}function yc(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),updateStart:Y(),update:Y(),updateEnd:Y()}}function bc(e,t){let n=yc();return n.doubleClick.on(n=>{var r,i;t.edgeDoubleClick(n),(i=(r=e.events)?.doubleClick)==null||i.call(r,n)}),n.click.on(n=>{var r,i;t.edgeClick(n),(i=(r=e.events)?.click)==null||i.call(r,n)}),n.mouseEnter.on(n=>{var r,i;t.edgeMouseEnter(n),(i=(r=e.events)?.mouseEnter)==null||i.call(r,n)}),n.mouseMove.on(n=>{var r,i;t.edgeMouseMove(n),(i=(r=e.events)?.mouseMove)==null||i.call(r,n)}),n.mouseLeave.on(n=>{var r,i;t.edgeMouseLeave(n),(i=(r=e.events)?.mouseLeave)==null||i.call(r,n)}),n.contextMenu.on(n=>{var r,i;t.edgeContextMenu(n),(i=(r=e.events)?.contextMenu)==null||i.call(r,n)}),n.updateStart.on(n=>{var r,i;t.edgeUpdateStart(n),(i=(r=e.events)?.updateStart)==null||i.call(r,n)}),n.update.on(n=>{var r,i;t.edgeUpdate(n),(i=(r=e.events)?.update)==null||i.call(r,n)}),n.updateEnd.on(n=>{var r,i;t.edgeUpdateEnd(n),(i=(r=e.events)?.updateEnd)==null||i.call(r,n)}),Object.entries(n).reduce((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e),{emit:{},on:{}})}function xc(){let{viewport:e,snapGrid:t,snapToGrid:n,vueFlowRef:r}=$();return i=>{let a=r.value?.getBoundingClientRect()??{left:0,top:0},{x:o,y:s}=Ls(Is(i)?i.sourceEvent:i,a),c=Zo({x:o,y:s},e.value),{x:l,y:u}=n.value?Bs(c,t.value):c;return{xSnapped:l,ySnapped:u,...c}}}function Sc(){return!0}function Cc({handleId:e,nodeId:t,type:n,isValidConnection:r,edgeUpdaterType:i,onEdgeUpdate:a,onEdgeUpdateEnd:o}){let{id:c,vueFlowRef:l,connectionMode:u,connectionRadius:d,connectOnClick:f,connectionClickStartHandle:p,nodesConnectable:m,autoPanOnConnect:h,autoPanSpeed:g,findNode:_,panBy:v,startConnection:y,updateConnection:b,endConnection:x,emits:S,viewport:C,edges:w,nodes:T,isValidConnection:E,nodeLookup:D}=$(),O=null,k=!1,A=null;function j(f){let p=s(n)===`target`,m=Fs(f),j=Lo(f.target),M=f.currentTarget;if(M&&(m&&f.button===0||!m)){let n=function(n){U=Ls(n,B),F=Gs(Zo(U,C.value,!1,[1,1]),d.value,D.value,K),W||=(G(),!0);let r=Ks(n,{handle:F,connectionMode:u.value,fromNodeId:s(t),fromHandleId:s(e),fromType:p?`target`:`source`,isValidConnection:P,doc:j,lib:`vue`,flowId:c,nodeLookup:D.value},w.value,T.value,_,D.value);A=r.handleDomNode,O=r.connection,k=Ys(!!F,r.isValid);let i={...q,isValid:k,to:r.toHandle&&k?Xo({x:r.toHandle.x,y:r.toHandle.y},C.value):U,toHandle:r.toHandle,toPosition:k&&r.toHandle?r.toHandle.position:Zs[K.position],toNode:r.toHandle?D.value.get(r.toHandle.nodeId):null};if(k&&F&&q?.toHandle&&i.toHandle&&q.toHandle.type===i.toHandle.type&&q.toHandle.nodeId===i.toHandle.nodeId&&q.toHandle.id===i.toHandle.id&&q.to.x===i.to.x&&q.to.y===i.to.y)return;let a=F??r.toHandle;if(b(a&&k?Xo({x:a.x,y:a.y},C.value):U,r.toHandle,Js(!!a,k)),q=i,!F&&!k&&!A)return Hs(H);O&&O.source!==O.target&&A&&(Hs(H),H=A,A.classList.add(`connecting`,`vue-flow__handle-connecting`),A.classList.toggle(`valid`,!!k),A.classList.toggle(`vue-flow__handle-valid`,!!k))},m=function(e){`touches`in e&&e.touches.length>0||((F||A)&&O&&k&&(a?a(e,O):S.connect(O)),S.connectEnd(e),i&&o?.(e),Hs(H),cancelAnimationFrame(I),x(e),W=!1,k=!1,O=null,A=null,j.removeEventListener(`mousemove`,n),j.removeEventListener(`mouseup`,m),j.removeEventListener(`touchmove`,n),j.removeEventListener(`touchend`,m))},N=_(s(t)),P=s(r)||E.value||Sc;!P&&N&&(P=(p?N.isValidSourcePos:N.isValidTargetPos)||Sc);let F,I=0,{x:L,y:R}=Ls(f),z=qs(s(i),M),B=l.value?.getBoundingClientRect();if(!B||!z)return;let V=Xs(s(t),z,s(e),D.value,u.value);if(!V)return;let H,U=Ls(f,B),W=!1,G=()=>{if(!h.value)return;let[e,t]=ps(U,B,g.value);v({x:e,y:t}),I=requestAnimationFrame(G)},K={...V,nodeId:s(t),type:z,position:V.position},ee=D.value.get(s(t)),te={inProgress:!0,isValid:null,from:As(ee,K,J.Left,!0),fromHandle:K,fromPosition:K.position,fromNode:ee,to:U,toHandle:null,toPosition:Zs[K.position],toNode:null};y({nodeId:s(t),id:s(e),type:z,position:M?.getAttribute(`data-handlepos`)||J.Top,...U},{x:L-B.left,y:R-B.top}),S.connectStart({event:f,nodeId:s(t),handleId:s(e),handleType:z});let q=te;j.addEventListener(`mousemove`,n),j.addEventListener(`mouseup`,m),j.addEventListener(`touchmove`,n),j.addEventListener(`touchend`,m)}}function M(i){if(!f.value)return;let a=s(n)===`target`;if(!p.value){S.clickConnectStart({event:i,nodeId:s(t),handleId:s(e)}),y({nodeId:s(t),type:s(n),id:s(e),position:J.Top,...Ls(i)},void 0,!0);return}let o=s(r)||E.value||Sc,l=_(s(t));if(!o&&l&&(o=(a?l.isValidSourcePos:l.isValidTargetPos)||Sc),l&&(l.connectable===void 0?m.value:l.connectable)===!1)return;let d=Lo(i.target),h=Ks(i,{handle:{nodeId:s(t),id:s(e),type:s(n),position:J.Top,...Ls(i)},connectionMode:u.value,fromNodeId:p.value.nodeId,fromHandleId:p.value.id??null,fromType:p.value.type,isValidConnection:o,doc:d,lib:`vue`,flowId:c,nodeLookup:D.value},w.value,T.value,_,D.value),g=h.connection?.source===h.connection?.target;h.isValid&&h.connection&&!g&&S.connect(h.connection),S.clickConnectEnd(i),x(i,!0)}return{handlePointerDown:j,handleClick:M}}function wc(){return H(pc,``)}function Tc(e){let t=e??wc()??``,n=H(mc,f(null)),{findNode:r,edges:i,emits:a}=$(),o=r(t);return o||a.error(new Z(X.NODE_NOT_FOUND,t)),{id:t,nodeEl:n,node:o,parentNode:z(()=>r(o.parentNode)),connectedEdges:z(()=>rs([o],i.value))}}function Ec(){return{doubleClick:Y(),click:Y(),mouseEnter:Y(),mouseMove:Y(),mouseLeave:Y(),contextMenu:Y(),dragStart:Y(),drag:Y(),dragStop:Y()}}function Dc(e,t){let n=Ec();return n.doubleClick.on(n=>{var r,i;t.nodeDoubleClick(n),(i=(r=e.events)?.doubleClick)==null||i.call(r,n)}),n.click.on(n=>{var r,i;t.nodeClick(n),(i=(r=e.events)?.click)==null||i.call(r,n)}),n.mouseEnter.on(n=>{var r,i;t.nodeMouseEnter(n),(i=(r=e.events)?.mouseEnter)==null||i.call(r,n)}),n.mouseMove.on(n=>{var r,i;t.nodeMouseMove(n),(i=(r=e.events)?.mouseMove)==null||i.call(r,n)}),n.mouseLeave.on(n=>{var r,i;t.nodeMouseLeave(n),(i=(r=e.events)?.mouseLeave)==null||i.call(r,n)}),n.contextMenu.on(n=>{var r,i;t.nodeContextMenu(n),(i=(r=e.events)?.contextMenu)==null||i.call(r,n)}),n.dragStart.on(n=>{var r,i;t.nodeDragStart(n),(i=(r=e.events)?.dragStart)==null||i.call(r,n)}),n.drag.on(n=>{var r,i;t.nodeDrag(n),(i=(r=e.events)?.drag)==null||i.call(r,n)}),n.dragStop.on(n=>{var r,i;t.nodeDragStop(n),(i=(r=e.events)?.dragStop)==null||i.call(r,n)}),Object.entries(n).reduce((e,[t,n])=>(e.emit[t]=n.trigger,e.on[t]=n.on,e),{emit:{},on:{}})}function Oc(){let{getSelectedNodes:e,nodeExtent:t,updateNodePositions:n,findNode:r,snapGrid:i,snapToGrid:a,nodesDraggable:o,emits:s}=$();return(c,l=!1)=>{let u=a.value?i.value[0]:5,d=a.value?i.value[1]:5,f=l?4:1,p=c.x*u*f,m=c.y*d*f,h=[];for(let n of e.value)if(n.draggable||o&&n.draggable===void 0){let{computedPosition:e}=ks(n,{x:n.computedPosition.x+p,y:n.computedPosition.y+m},s.error,t.value,n.parentNode?r(n.parentNode):void 0);h.push({id:n.id,position:e,from:n.position,distance:{x:c.x,y:c.y},dimensions:n.dimensions})}n(h,!0,!1)}}var kc=.1,Ac=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2;function jc(){return $s(`Viewport not initialized yet.`),Promise.resolve(!1)}var Mc={zoomIn:jc,zoomOut:jc,zoomTo:jc,fitView:jc,setCenter:jc,fitBounds:jc,project:e=>e,screenToFlowCoordinate:e=>e,flowToScreenCoordinate:e=>e,setViewport:jc,setTransform:jc,getViewport:()=>({x:0,y:0,zoom:1}),getTransform:()=>({x:0,y:0,zoom:1}),viewportInitialized:!1};function Nc(e){function t(t,n){return new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(n?.interpolate===`linear`?qr:si).scaleBy(Pc(e.d3Selection,n?.duration,n?.ease,()=>{r(!0)}),t):r(!1)})}function n(t,n,r,i){return new Promise(a=>{var o;let{x:s,y:c}=Io({x:-t,y:-n},e.translateExtent),l=ro.translate(-s,-c).scale(r);e.d3Selection&&e.d3Zoom?(o=e.d3Zoom)==null||o.interpolate(i?.interpolate===`linear`?qr:si).transform(Pc(e.d3Selection,i?.duration,i?.ease,()=>{a(!0)}),l):a(!1)})}return z(()=>e.d3Zoom&&e.d3Selection&&e.dimensions.width&&e.dimensions.height?{viewportInitialized:!0,zoomIn:e=>t(1.2,e),zoomOut:e=>t(1/1.2,e),zoomTo:(t,n)=>new Promise(r=>{e.d3Selection&&e.d3Zoom?e.d3Zoom.interpolate(n?.interpolate===`linear`?qr:si).scaleTo(Pc(e.d3Selection,n?.duration,n?.ease,()=>{r(!0)}),t):r(!1)}),setViewport:(e,t)=>n(e.x,e.y,e.zoom,t),setTransform:(e,t)=>n(e.x,e.y,e.zoom,t),getViewport:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),getTransform:()=>({x:e.viewport.x,y:e.viewport.y,zoom:e.viewport.zoom}),fitView:(t={padding:kc,includeHiddenNodes:!1,duration:0})=>{let r=[];for(let n of e.nodes)n.dimensions.width&&n.dimensions.height&&(t?.includeHiddenNodes||!n.hidden)&&(!t.nodes?.length||t.nodes?.length&&t.nodes.includes(n.id))&&r.push(n);if(!r.length)return Promise.resolve(!1);let{x:i,y:a,zoom:o}=ss(ts(r),e.dimensions.width,e.dimensions.height,t.minZoom??e.minZoom,t.maxZoom??e.maxZoom,t.padding??kc);return n(i,a,o,t)},setCenter:(t,r,i)=>{let a=i?.zoom===void 0?e.maxZoom:i.zoom;return n(e.dimensions.width/2-t*a,e.dimensions.height/2-r*a,a,i)},fitBounds:(t,r={padding:kc})=>{let{x:i,y:a,zoom:o}=ss(t,e.dimensions.width,e.dimensions.height,e.minZoom,e.maxZoom,r.padding??kc);return n(i,a,o,r)},project:t=>Zo(t,e.viewport,e.snapToGrid,e.snapGrid),screenToFlowCoordinate:t=>{if(e.vueFlowRef){let{x:n,y:r}=e.vueFlowRef.getBoundingClientRect();return Zo({x:t.x-n,y:t.y-r},e.viewport,e.snapToGrid,e.snapGrid)}return{x:0,y:0}},flowToScreenCoordinate:t=>{if(e.vueFlowRef){let{x:n,y:r}=e.vueFlowRef.getBoundingClientRect();return Xo({x:t.x+n,y:t.y+r},e.viewport)}return{x:0,y:0}}}:Mc)}function Pc(e,t=0,n=Ac,r=()=>{}){let i=typeof t==`number`&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on(`end`,r):e}function Fc(n,r,a){let o=e(!0);return o.run(()=>{o.run(()=>{let e,t,r=!!(a.nodes.value.length||a.edges.value.length);e=fe([n.modelValue,()=>n.modelValue?.value?.length],([e])=>{e&&Array.isArray(e)&&(t?.pause(),a.setElements(e),!t&&!r&&e.length?r=!0:t?.resume())}),t=fe([a.nodes,a.edges,()=>a.edges.value.length,()=>a.nodes.value.length],([t,r])=>{n.modelValue?.value&&Array.isArray(n.modelValue.value)&&(e?.pause(),n.modelValue.value=[...t,...r],O(()=>{e?.resume()}))},{immediate:r}),h(()=>{e?.stop(),t?.stop()})}),o.run(()=>{let e,t,r=!!a.nodes.value.length;e=fe([n.nodes,()=>n.nodes?.value?.length],([e])=>{e&&Array.isArray(e)&&(t?.pause(),a.setNodes(e),!t&&!r&&e.length?r=!0:t?.resume())}),t=fe([a.nodes,()=>a.nodes.value.length],([t])=>{n.nodes?.value&&Array.isArray(n.nodes.value)&&(e?.pause(),n.nodes.value=[...t],O(()=>{e?.resume()}))},{immediate:r}),h(()=>{e?.stop(),t?.stop()})}),o.run(()=>{let e,t,r=!!a.edges.value.length;e=fe([n.edges,()=>n.edges?.value?.length],([e])=>{e&&Array.isArray(e)&&(t?.pause(),a.setEdges(e),!t&&!r&&e.length?r=!0:t?.resume())}),t=fe([a.edges,()=>a.edges.value.length],([t])=>{n.edges?.value&&Array.isArray(n.edges.value)&&(e?.pause(),n.edges.value=[...t],O(()=>{e?.resume()}))},{immediate:r}),h(()=>{e?.stop(),t?.stop()})}),o.run(()=>{i(()=>r.minZoom,()=>{r.minZoom&&Q(r.minZoom)&&a.setMinZoom(r.minZoom)},{immediate:!0})}),o.run(()=>{i(()=>r.maxZoom,()=>{r.maxZoom&&Q(r.maxZoom)&&a.setMaxZoom(r.maxZoom)},{immediate:!0})}),o.run(()=>{i(()=>r.translateExtent,()=>{r.translateExtent&&Q(r.translateExtent)&&a.setTranslateExtent(r.translateExtent)},{immediate:!0})}),o.run(()=>{i(()=>r.nodeExtent,()=>{r.nodeExtent&&Q(r.nodeExtent)&&a.setNodeExtent(r.nodeExtent)},{immediate:!0})}),o.run(()=>{i(()=>r.applyDefault,()=>{Q(r.applyDefault)&&(a.applyDefault.value=r.applyDefault)},{immediate:!0})}),o.run(()=>{let e=async e=>{let t=e;typeof r.autoConnect==`function`&&(t=await r.autoConnect(e)),t!==!1&&a.addEdges([t])};i(()=>r.autoConnect,()=>{Q(r.autoConnect)&&(a.autoConnect.value=r.autoConnect)},{immediate:!0}),i(a.autoConnect,(t,n,r)=>{t?a.onConnect(e):a.hooks.value.connect.off(e),r(()=>{a.hooks.value.connect.off(e)})},{immediate:!0})}),(()=>{let e=[`id`,`modelValue`,`translateExtent`,`nodeExtent`,`edges`,`nodes`,`maxZoom`,`minZoom`,`applyDefault`,`autoConnect`];for(let n of Object.keys(r)){let s=n;if(!e.includes(s)){let e=t(()=>r[s]),n=a[s];p(n)&&o.run(()=>{i(e,e=>{Q(e)&&(n.value=e)},{immediate:!0})})}}})()}),()=>o.stop()}function Ic(){return{edgesChange:Y(),nodesChange:Y(),nodeDoubleClick:Y(),nodeClick:Y(),nodeMouseEnter:Y(),nodeMouseMove:Y(),nodeMouseLeave:Y(),nodeContextMenu:Y(),nodeDragStart:Y(),nodeDrag:Y(),nodeDragStop:Y(),nodesInitialized:Y(),miniMapNodeClick:Y(),miniMapNodeDoubleClick:Y(),miniMapNodeMouseEnter:Y(),miniMapNodeMouseMove:Y(),miniMapNodeMouseLeave:Y(),connect:Y(),connectStart:Y(),connectEnd:Y(),clickConnectStart:Y(),clickConnectEnd:Y(),paneReady:Y(),init:Y(),move:Y(),moveStart:Y(),moveEnd:Y(),selectionDragStart:Y(),selectionDrag:Y(),selectionDragStop:Y(),selectionContextMenu:Y(),selectionStart:Y(),selectionEnd:Y(),viewportChangeStart:Y(),viewportChange:Y(),viewportChangeEnd:Y(),paneScroll:Y(),paneClick:Y(),paneContextMenu:Y(),paneMouseEnter:Y(),paneMouseMove:Y(),paneMouseLeave:Y(),edgeContextMenu:Y(),edgeMouseEnter:Y(),edgeMouseMove:Y(),edgeMouseLeave:Y(),edgeDoubleClick:Y(),edgeClick:Y(),edgeUpdateStart:Y(),edgeUpdate:Y(),edgeUpdateEnd:Y(),updateNodeInternals:Y(),error:Y(e=>$s(e.message))}}function Lc(e,t){let n=N();A(()=>{for(let[n,i]of Object.entries(t.value))i.setEmitter(t=>{e(n,t)}),te(i.removeEmitter),i.setHasEmitListeners(()=>r(n)),te(i.removeHasEmitListeners)});function r(e){let t=Rc(e);return!!n?.vnode.props?.[t]}}function Rc(e){let[t,...n]=e.split(`:`);return`on${t.replace(/(?:^|-)(\w)/g,(e,t)=>t.toUpperCase())}${n.length?`:${n.join(`:`)}`:``}`}function zc(){return{vueFlowRef:null,viewportRef:null,nodes:[],edges:[],connectionLookup:new Map,nodeTypes:{},edgeTypes:{},initialized:!1,dimensions:{width:0,height:0},viewport:{x:0,y:0,zoom:1},d3Zoom:null,d3Selection:null,d3ZoomHandler:null,minZoom:.5,maxZoom:2,translateExtent:[[-1/0,-1/0],[1/0,1/0]],nodeExtent:[[-1/0,-1/0],[1/0,1/0]],selectionMode:mo.Full,paneDragging:!1,preventScrolling:!0,zoomOnScroll:!0,zoomOnPinch:!0,zoomOnDoubleClick:!0,panOnScroll:!1,panOnScrollSpeed:.5,panOnScrollMode:vo.Free,paneClickDistance:0,panOnDrag:!0,edgeUpdaterRadius:10,onlyRenderVisibleElements:!1,defaultViewport:{x:0,y:0,zoom:1},nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,defaultMarkerColor:`#b1b1b7`,connectionLineStyle:{},connectionLineType:null,connectionLineOptions:{type:ho.Bezier,style:{}},connectionMode:go.Loose,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectionPosition:{x:NaN,y:NaN},connectionRadius:20,connectOnClick:!0,connectionStatus:null,isValidConnection:null,snapGrid:[15,15],snapToGrid:!1,edgesUpdatable:!1,edgesFocusable:!0,nodesFocusable:!0,nodesConnectable:!0,nodesDraggable:!0,nodeDragThreshold:1,elementsSelectable:!0,selectNodesOnDrag:!0,multiSelectionActive:!1,selectionKeyCode:`Shift`,multiSelectionKeyCode:Rs()?`Meta`:`Control`,zoomActivationKeyCode:Rs()?`Meta`:`Control`,deleteKeyCode:`Backspace`,panActivationKeyCode:`Space`,hooks:Ic(),applyDefault:!0,autoConnect:!1,fitViewOnInit:!1,fitViewOnInitDone:!1,noDragClassName:`nodrag`,noWheelClassName:`nowheel`,noPanClassName:`nopan`,defaultEdgeOptions:void 0,elevateEdgesOnSelect:!1,elevateNodesOnSelect:!0,autoPanOnNodeDrag:!0,autoPanOnConnect:!0,autoPanSpeed:15,disableKeyboardA11y:!1,ariaLiveMessage:``}}var Bc=[`id`,`vueFlowRef`,`viewportRef`,`initialized`,`modelValue`,`nodes`,`edges`,`maxZoom`,`minZoom`,`translateExtent`,`hooks`,`defaultEdgeOptions`];function Vc(e,t,n){let r=Nc(e),i=t=>{let n=t??[];e.hooks.updateNodeInternals.trigger(n)},a=t=>qo(t,e.nodes,e.edges),o=t=>Ko(t,e.nodes,e.edges),s=t=>rs(t,e.edges),c=({id:t,type:n,nodeId:r})=>{let i=t?`-${n}-${t}`:`-${n}`;return Array.from(e.connectionLookup.get(`${r}${i}`)?.values()??[])},l=e=>{if(e)return t.value.get(e)},u=e=>{if(e)return n.value.get(e)},d=(t,n,r)=>{let i=[];for(let e of t){let t={id:e.id,type:`position`,dragging:r,from:e.from};if(n&&(t.position=e.position,e.parentNode)){let n=l(e.parentNode);t.position={x:t.position.x-(n?.computedPosition?.x??0),y:t.position.y-(n?.computedPosition?.y??0)}}i.push(t)}i?.length&&e.hooks.nodesChange.trigger(i)},f=t=>{if(!e.vueFlowRef)return;let n=e.vueFlowRef.querySelector(`.vue-flow__transformationpane`);if(!n)return;let i=window.getComputedStyle(n),{m22:a}=new window.DOMMatrixReadOnly(i.transform),o=[];for(let e of t){let t=e,n=l(t.id);if(n){let e=Po(t.nodeElement);if(e.width&&e.height&&(n.dimensions.width!==e.width||n.dimensions.height!==e.height||t.forceUpdate)){let r=t.nodeElement.getBoundingClientRect();n.dimensions=e,n.handleBounds.source=tc(`source`,t.nodeElement,r,a,n.id),n.handleBounds.target=tc(`target`,t.nodeElement,r,a,n.id),o.push({id:n.id,type:`dimensions`,dimensions:e})}}}!e.fitViewOnInitDone&&e.fitViewOnInit&&r.value.fitView().then(()=>{e.fitViewOnInitDone=!0}),o.length&&e.hooks.nodesChange.trigger(o)},p=(r,i)=>{let a=new Set,o=new Set;for(let e of r)zo(e)?a.add(e.id):Ro(e)&&o.add(e.id);let s=bs(t.value,a,!0),c=bs(n.value,o);if(e.multiSelectionActive){for(let e of a)s.push(gs(e,i));for(let e of o)c.push(gs(e,i))}s.length&&e.hooks.nodesChange.trigger(s),c.length&&e.hooks.edgesChange.trigger(c)},m=r=>{if(e.multiSelectionActive){let t=r.map(e=>gs(e.id,!0));e.hooks.nodesChange.trigger(t);return}e.hooks.nodesChange.trigger(bs(t.value,new Set(r.map(e=>e.id)),!0)),e.hooks.edgesChange.trigger(bs(n.value))},h=r=>{if(e.multiSelectionActive){let t=r.map(e=>gs(e.id,!0));e.hooks.edgesChange.trigger(t);return}e.hooks.edgesChange.trigger(bs(n.value,new Set(r.map(e=>e.id)))),e.hooks.nodesChange.trigger(bs(t.value,new Set,!0))},g=e=>{p(e,!0)},_=t=>{let n=(t||e.nodes).map(e=>(e.selected=!1,gs(e.id,!1)));e.hooks.nodesChange.trigger(n)},v=t=>{let n=(t||e.edges).map(e=>(e.selected=!1,gs(e.id,!1)));e.hooks.edgesChange.trigger(n)},y=t=>{if(!t||!t.length)return p([],!1);let n=t.reduce((e,t)=>{let n=gs(t.id,!1);return zo(t)?e.nodes.push(n):e.edges.push(n),e},{nodes:[],edges:[]});n.nodes.length&&e.hooks.nodesChange.trigger(n.nodes),n.edges.length&&e.hooks.edgesChange.trigger(n.edges)},b=t=>{var n;(n=e.d3Zoom)==null||n.scaleExtent([t,e.maxZoom]),e.minZoom=t},x=t=>{var n;(n=e.d3Zoom)==null||n.scaleExtent([e.minZoom,t]),e.maxZoom=t},S=t=>{var n;(n=e.d3Zoom)==null||n.translateExtent(t),e.translateExtent=t},C=t=>{e.nodeExtent=t,i()},w=t=>{var n;(n=e.d3Zoom)==null||n.clickDistance(t)},T=t=>{e.nodesDraggable=t,e.nodesConnectable=t,e.elementsSelectable=t},E=t=>{let n=t instanceof Function?t(e.nodes):t;!e.initialized&&!n.length||(e.nodes=ac(n,l,e.hooks.error.trigger))},D=t=>{let r=t instanceof Function?t(e.edges):t;if(!e.initialized&&!r.length)return;let i=dc(r,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);sc(e.connectionLookup,n.value,i),e.edges=i},O=t=>{let n=t instanceof Function?t([...e.nodes,...e.edges]):t;!e.initialized&&!n.length||(E(n.filter(zo)),D(n.filter(Ro)))},k=t=>{let n=t instanceof Function?t(e.nodes):t;n=Array.isArray(n)?n:[n];let r=ac(n,l,e.hooks.error.trigger),i=[];for(let e of r)i.push(_s(e));i.length&&e.hooks.nodesChange.trigger(i)},A=t=>{let n=t instanceof Function?t(e.edges):t;n=Array.isArray(n)?n:[n];let r=dc(n,e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges),i=[];for(let e of r)i.push(_s(e));i.length&&e.hooks.edgesChange.trigger(i)},j=(t,n=!0,r=!1)=>{let i=t instanceof Function?t(e.nodes):t,a=Array.isArray(i)?i:[i],o=[],c=[];function u(e){let t=s(e);for(let e of t)(!Q(e.deletable)||e.deletable)&&c.push(ys(e.id,e.source,e.target,e.sourceHandle,e.targetHandle))}function d(t){let r=[];for(let n of e.nodes)n.parentNode===t&&r.push(n);if(r.length){for(let e of r)o.push(vs(e.id));n&&u(r);for(let e of r)d(e.id)}}for(let e of a){let t=typeof e==`string`?l(e):e;t&&(Q(t.deletable)&&!t.deletable||(o.push(vs(t.id)),n&&u([t]),r&&d(t.id)))}c.length&&e.hooks.edgesChange.trigger(c),o.length&&e.hooks.nodesChange.trigger(o)},M=t=>{let n=t instanceof Function?t(e.edges):t,r=Array.isArray(n)?n:[n],i=[];for(let e of r){let t=typeof e==`string`?u(e):e;t&&(Q(t.deletable)&&!t.deletable||i.push(ys(typeof e==`string`?e:e.id,t.source,t.target,t.sourceHandle,t.targetHandle)))}e.hooks.edgesChange.trigger(i)},N=(t,r,i=!0)=>{let a=u(t.id);if(!a)return!1;let o=e.edges.indexOf(a),s=ic(t,r,a,i,e.hooks.error.trigger);if(s){let[t]=dc([s],e.isValidConnection,l,u,e.hooks.error.trigger,e.defaultEdgeOptions,e.nodes,e.edges);return e.edges=e.edges.map((e,n)=>n===o?t:e),sc(e.connectionLookup,n.value,[t]),t}return!1},P=(e,t,n={replace:!1})=>{let r=u(e);if(!r)return;let i=typeof t==`function`?t(r):t;r.data=n.replace?i:{...r.data,...i}},F=t=>hs(t,e.nodes),I=t=>{let r=hs(t,e.edges);return sc(e.connectionLookup,n.value,r),r},L=(t,n,r={replace:!1})=>{let i=l(t);if(!i)return;let a=typeof n==`function`?n(i):n;r.replace?e.nodes.splice(e.nodes.indexOf(i),1,a):Object.assign(i,a)},R=(e,t,n={replace:!1})=>{let r=l(e);if(!r)return;let i=typeof t==`function`?t(r):t;r.data=n.replace?i:{...r.data,...i}},z=(t,n,r=!1)=>{r?e.connectionClickStartHandle=t:e.connectionStartHandle=t,e.connectionEndHandle=null,e.connectionStatus=null,n&&(e.connectionPosition=n)},B=(t,n=null,r=null)=>{e.connectionStartHandle&&(e.connectionPosition=t,e.connectionEndHandle=n,e.connectionStatus=r)},V=(t,n)=>{e.connectionPosition={x:NaN,y:NaN},e.connectionEndHandle=null,e.connectionStatus=null,n?e.connectionClickStartHandle=null:e.connectionStartHandle=null},H=e=>{let t=Ho(e),n=t?null:Bo(e)?e:l(e.id);return!t&&!n?[null,null,t]:[t?e:Mo(n),n,t]},U=(t,n=!0,r=e.nodes)=>{let[i,a,o]=H(t);if(!i)return[];let s=[];for(let t of r||e.nodes){if(!o&&(t.id===a.id||!t.computedPosition))continue;let e=Mo(t),r=No(e,i);(n&&r>0||r>=e.width*e.height||r>=Number(i.width)*Number(i.height))&&s.push(t)}return s},W=(e,t,n=!0)=>{let[r]=H(e);if(!r)return!1;let i=No(r,t);return n&&i>0||i>=Number(r.width)*Number(r.height)},G=t=>{let{viewport:n,dimensions:r,d3Zoom:i,d3Selection:a,translateExtent:o}=e;if(!i||!a||!t.x&&!t.y)return!1;let s=ro.translate(n.x+t.x,n.y+t.y).scale(n.zoom),c=[[0,0],[r.width,r.height]],l=i.constrain()(s,c,o),u=e.viewport.x!==l.x||e.viewport.y!==l.y||e.viewport.zoom!==l.k;return i.transform(a,l),u},K=t=>{let n=t instanceof Function?t(e):t,r=[`d3Zoom`,`d3Selection`,`d3ZoomHandler`,`viewportRef`,`vueFlowRef`,`dimensions`,`hooks`];Q(n.defaultEdgeOptions)&&(e.defaultEdgeOptions=n.defaultEdgeOptions);let i=n.modelValue||n.nodes||n.edges?[]:void 0;i&&(n.modelValue&&i.push(...n.modelValue),n.nodes&&i.push(...n.nodes),n.edges&&i.push(...n.edges),O(i));let a=()=>{Q(n.maxZoom)&&x(n.maxZoom),Q(n.minZoom)&&b(n.minZoom),Q(n.translateExtent)&&S(n.translateExtent)};for(let t of Object.keys(n)){let i=t,a=n[i];![...Bc,...r].includes(i)&&Q(a)&&(e[i]=a)}he(()=>e.d3Zoom).not.toBeNull().then(a),e.initialized||=!0};return{updateNodePositions:d,updateNodeDimensions:f,setElements:O,setNodes:E,setEdges:D,addNodes:k,addEdges:A,removeNodes:j,removeEdges:M,findNode:l,findEdge:u,updateEdge:N,updateEdgeData:P,updateNode:L,updateNodeData:R,applyEdgeChanges:I,applyNodeChanges:F,addSelectedElements:g,addSelectedNodes:m,addSelectedEdges:h,setMinZoom:b,setMaxZoom:x,setTranslateExtent:S,setNodeExtent:C,setPaneClickDistance:w,removeSelectedElements:y,removeSelectedNodes:_,removeSelectedEdges:v,startConnection:z,updateConnection:B,endConnection:V,setInteractive:T,setState:K,getIntersectingNodes:U,getIncomers:a,getOutgoers:o,getConnectedEdges:s,getHandleConnections:c,isNodeIntersecting:W,panBy:G,fitView:e=>r.value.fitView(e),zoomIn:e=>r.value.zoomIn(e),zoomOut:e=>r.value.zoomOut(e),zoomTo:(e,t)=>r.value.zoomTo(e,t),setViewport:(e,t)=>r.value.setViewport(e,t),setTransform:(e,t)=>r.value.setTransform(e,t),getViewport:()=>r.value.getViewport(),getTransform:()=>r.value.getTransform(),setCenter:(e,t,n)=>r.value.setCenter(e,t,n),fitBounds:(e,t)=>r.value.fitBounds(e,t),project:e=>r.value.project(e),screenToFlowCoordinate:e=>r.value.screenToFlowCoordinate(e),flowToScreenCoordinate:e=>r.value.flowToScreenCoordinate(e),toObject:()=>{let t=[],n=[];for(let n of e.nodes){let{computedPosition:e,handleBounds:r,selected:i,dimensions:a,isParent:o,resizing:s,dragging:c,events:l,...u}=n;t.push(u)}for(let t of e.edges){let{selected:e,sourceNode:r,targetNode:i,events:a,...o}=t;n.push(o)}return JSON.parse(JSON.stringify({nodes:t,edges:n,position:[e.viewport.x,e.viewport.y],zoom:e.viewport.zoom,viewport:e.viewport}))},fromObject:t=>new Promise(n=>{let{nodes:i,edges:a,position:o,zoom:s,viewport:c}=t;if(i&&E(i),a&&D(a),c?.x&&c?.y||o){let t=c?.x||o[0],i=c?.y||o[1],a=c?.zoom||s||e.viewport.zoom;return he(()=>r.value.viewportInitialized).toBe(!0).then(()=>{r.value.setViewport({x:t,y:i,zoom:a}).then(()=>{n(!0)})})}else n(!0)}),updateNodeInternals:i,viewportHelper:r,$reset:()=>{let t=zc();if(e.edges=[],e.nodes=[],e.d3Zoom&&e.d3Selection){let n=ro.translate(t.defaultViewport.x??0,t.defaultViewport.y??0).scale(Fo(t.defaultViewport.zoom??1,t.minZoom,t.maxZoom)),r=e.viewportRef.getBoundingClientRect(),i=[[0,0],[r.width,r.height]],a=e.d3Zoom.constrain()(n,i,t.translateExtent);e.d3Zoom.transform(e.d3Selection,a)}K(t)},$destroy:()=>{}}}var Hc=[`data-id`,`data-handleid`,`data-nodeid`,`data-handlepos`],Uc=V({name:`Handle`,compatConfig:{MODE:3},props:{id:{default:null},type:{},position:{default:()=>J.Top},isValidConnection:{type:Function},connectable:{type:[Boolean,Number,String,Function],default:void 0},connectableStart:{type:Boolean,default:!0},connectableEnd:{type:Boolean,default:!0}},setup(e,{expose:n}){let r=g(e,[`position`,`connectable`,`connectableStart`,`connectableEnd`,`id`]),i=t(()=>r.type??`source`),a=t(()=>r.isValidConnection??null),{id:o,connectionStartHandle:s,connectionClickStartHandle:c,connectionEndHandle:l,vueFlowRef:u,nodesConnectable:d,noDragClassName:p,noPanClassName:m}=$(),{id:h,node:_,nodeEl:v,connectedEdges:b}=Tc(),S=f(),C=t(()=>e.connectableStart===void 0?!0:e.connectableStart),T=t(()=>e.connectableEnd===void 0?!0:e.connectableEnd),E=t(()=>s.value?.nodeId===h&&s.value?.id===e.id&&s.value?.type===i.value||l.value?.nodeId===h&&l.value?.id===e.id&&l.value?.type===i.value),D=t(()=>c.value?.nodeId===h&&c.value?.id===e.id&&c.value?.type===i.value),{handlePointerDown:O,handleClick:k}=Cc({nodeId:h,handleId:e.id,isValidConnection:a,type:i}),A=z(()=>typeof e.connectable==`string`&&e.connectable===`single`?!b.value.some(t=>{let n=t[`${i.value}Handle`];return t[i.value]===h?n?n===e.id:!0:!1}):typeof e.connectable==`number`?b.value.filter(t=>{let n=t[`${i.value}Handle`];return t[i.value]===h?n?n===e.id:!0:!1}).length<e.connectable:typeof e.connectable==`function`?e.connectable(_,b.value):Q(e.connectable)?e.connectable:d.value);I(()=>{if(!_.dimensions.width||!_.dimensions.height)return;let t=_.handleBounds[i.value]?.find(t=>t.id===e.id);if(!u.value||t)return;let n=u.value.querySelector(`.vue-flow__transformationpane`);if(!v.value||!S.value||!n||!e.id)return;let r=v.value.getBoundingClientRect(),a=S.value.getBoundingClientRect(),o=window.getComputedStyle(n),{m22:s}=new window.DOMMatrixReadOnly(o.transform),c={id:e.id,position:e.position,x:(a.left-r.left)/s,y:(a.top-r.top)/s,type:i.value,nodeId:h,...Po(S.value)};_.handleBounds[i.value]=[..._.handleBounds[i.value]??[],c]});function M(e){let t=Fs(e);A.value&&C.value&&(t&&e.button===0||!t)&&O(e)}function N(e){!h||!c.value&&!C.value||A.value&&k(e)}return n({handleClick:k,handlePointerDown:O,onClick:N,onPointerDown:M}),(t,n)=>(j(),w(`div`,{ref_key:`handle`,ref:S,"data-id":`${y(o)}-${y(h)}-${e.id}-${i.value}`,"data-handleid":e.id,"data-nodeid":y(h),"data-handlepos":t.position,class:x([`vue-flow__handle`,[`vue-flow__handle-${t.position}`,`vue-flow__handle-${e.id}`,y(p),y(m),i.value,{connectable:A.value,connecting:D.value,connectablestart:C.value,connectableend:T.value,connectionindicator:A.value&&(C.value&&!E.value||T.value&&E.value)}]]),onMousedown:M,onTouchstartPassive:M,onClick:N},[K(t.$slots,`default`,{id:t.id})],42,Hc))}}),Wc=function({sourcePosition:e=J.Bottom,targetPosition:t=J.Top,label:n,connectable:r=!0,isValidTargetPos:i,isValidSourcePos:a,data:s}){let c=s.label??n;return[L(Uc,{type:`target`,position:t,connectable:r,isValidConnection:i}),typeof c!=`string`&&c?L(c):L(o,[c]),L(Uc,{type:`source`,position:e,connectable:r,isValidConnection:a})]};Wc.props=[`sourcePosition`,`targetPosition`,`label`,`isValidTargetPos`,`isValidSourcePos`,`connectable`,`data`],Wc.inheritAttrs=!1,Wc.compatConfig={MODE:3};var Gc=Wc,Kc=function({targetPosition:e=J.Top,label:t,connectable:n=!0,isValidTargetPos:r,data:i}){let a=i.label??t;return[L(Uc,{type:`target`,position:e,connectable:n,isValidConnection:r}),typeof a!=`string`&&a?L(a):L(o,[a])]};Kc.props=[`targetPosition`,`label`,`isValidTargetPos`,`connectable`,`data`],Kc.inheritAttrs=!1,Kc.compatConfig={MODE:3};var qc=Kc,Jc=function({sourcePosition:e=J.Bottom,label:t,connectable:n=!0,isValidSourcePos:r,data:i}){let a=i.label??t;return[typeof a!=`string`&&a?L(a):L(o,[a]),L(Uc,{type:`source`,position:e,connectable:n,isValidConnection:r})]};Jc.props=[`sourcePosition`,`label`,`isValidSourcePos`,`connectable`,`data`],Jc.inheritAttrs=!1,Jc.compatConfig={MODE:3};var Yc=Jc,Xc=[`transform`],Zc=[`width`,`height`,`x`,`y`,`rx`,`ry`],Qc=[`y`],$c=V({name:`EdgeText`,compatConfig:{MODE:3},props:{x:{},y:{},label:{},labelStyle:{default:()=>({})},labelShowBg:{type:Boolean,default:!0},labelBgStyle:{default:()=>({})},labelBgPadding:{default:()=>[2,4]},labelBgBorderRadius:{default:2}},setup(e){let t=f({x:0,y:0,width:0,height:0}),n=f(null),r=z(()=>`translate(${e.x-t.value.width/2} ${e.y-t.value.height/2})`);I(a),i([()=>e.x,()=>e.y,n,()=>e.label],a);function a(){if(!n.value)return;let e=n.value.getBBox();(e.width!==t.value.width||e.height!==t.value.height)&&(t.value=e)}return(e,i)=>(j(),w(`g`,{transform:r.value,class:`vue-flow__edge-textwrapper`},[e.labelShowBg?(j(),w(`rect`,{key:0,class:`vue-flow__edge-textbg`,width:`${t.value.width+2*e.labelBgPadding[0]}px`,height:`${t.value.height+2*e.labelBgPadding[1]}px`,x:-e.labelBgPadding[0],y:-e.labelBgPadding[1],style:d(e.labelBgStyle),rx:e.labelBgBorderRadius,ry:e.labelBgBorderRadius},null,12,Zc)):S(``,!0),l(`text`,W(e.$attrs,{ref_key:`el`,ref:n,class:`vue-flow__edge-text`,y:t.value.height/2,dy:`0.3em`,style:e.labelStyle}),[K(e.$slots,`default`,{},()=>[typeof e.label==`string`?(j(),w(o,{key:1},[k(B(e.label),1)],64)):(j(),C(_(e.label),{key:0}))])],16,Qc)],8,Xc))}}),el=[`id`,`d`,`marker-end`,`marker-start`],tl=[`d`,`stroke-width`],nl=V({name:`BaseEdge`,inheritAttrs:!1,compatConfig:{MODE:3},props:{id:{},labelX:{},labelY:{},path:{},label:{},markerStart:{},markerEnd:{},interactionWidth:{default:20},labelStyle:{},labelShowBg:{type:Boolean},labelBgStyle:{},labelBgPadding:{},labelBgBorderRadius:{}},setup(e,{expose:t}){let r=f(null),i=f(null),a=f(null),s=n();return t({pathEl:r,interactionEl:i,labelEl:a}),(e,t)=>(j(),w(o,null,[l(`path`,W(y(s),{id:e.id,ref_key:`pathEl`,ref:r,d:e.path,class:`vue-flow__edge-path`,"marker-end":e.markerEnd,"marker-start":e.markerStart}),null,16,el),e.interactionWidth?(j(),w(`path`,{key:0,ref_key:`interactionEl`,ref:i,fill:`none`,d:e.path,"stroke-width":e.interactionWidth,"stroke-opacity":0,class:`vue-flow__edge-interaction`},null,8,tl)):S(``,!0),e.label&&e.labelX&&e.labelY?(j(),C($c,{key:1,ref_key:`labelEl`,ref:a,x:e.labelX,y:e.labelY,label:e.label,"label-show-bg":e.labelShowBg,"label-bg-style":e.labelBgStyle,"label-bg-padding":e.labelBgPadding,"label-bg-border-radius":e.labelBgBorderRadius,"label-style":e.labelStyle},null,8,[`x`,`y`,`label`,`label-show-bg`,`label-bg-style`,`label-bg-padding`,`label-bg-border-radius`,`label-style`])):S(``,!0)],64))}});function rl({sourceX:e,sourceY:t,targetX:n,targetY:r}){let i=Math.abs(n-e)/2,a=n<e?n+i:n-i,o=Math.abs(r-t)/2;return[a,r<t?r+o:r-o,i,o]}function il({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:a,targetControlX:o,targetControlY:s}){let c=e*.125+i*.375+o*.375+n*.125,l=t*.125+a*.375+s*.375+r*.125;return[c,l,Math.abs(c-e),Math.abs(l-t)]}function al(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function ol({pos:e,x1:t,y1:n,x2:r,y2:i,c:a}){let o,s;switch(e){case J.Left:o=t-al(t-r,a),s=n;break;case J.Right:o=t+al(r-t,a),s=n;break;case J.Top:o=t,s=n-al(n-i,a);break;case J.Bottom:o=t,s=n+al(i-n,a);break}return[o,s]}function sl(e){let{sourceX:t,sourceY:n,sourcePosition:r=J.Bottom,targetX:i,targetY:a,targetPosition:o=J.Top,curvature:s=.25}=e,[c,l]=ol({pos:r,x1:t,y1:n,x2:i,y2:a,c:s}),[u,d]=ol({pos:o,x1:i,y1:a,x2:t,y2:n,c:s}),[f,p,m,h]=il({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:c,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${t},${n} C${c},${l} ${u},${d} ${i},${a}`,f,p,m,h]}function cl({pos:e,x1:t,y1:n,x2:r,y2:i}){let a,o;switch(e){case J.Left:case J.Right:a=.5*(t+r),o=n;break;case J.Top:case J.Bottom:a=t,o=.5*(n+i);break}return[a,o]}function ll(e){let{sourceX:t,sourceY:n,sourcePosition:r=J.Bottom,targetX:i,targetY:a,targetPosition:o=J.Top}=e,[s,c]=cl({pos:r,x1:t,y1:n,x2:i,y2:a}),[l,u]=cl({pos:o,x1:i,y1:a,x2:t,y2:n}),[d,f,p,m]=il({sourceX:t,sourceY:n,targetX:i,targetY:a,sourceControlX:s,sourceControlY:c,targetControlX:l,targetControlY:u});return[`M${t},${n} C${s},${c} ${l},${u} ${i},${a}`,d,f,p,m]}var ul={[J.Left]:{x:-1,y:0},[J.Right]:{x:1,y:0},[J.Top]:{x:0,y:-1},[J.Bottom]:{x:0,y:1}};function dl({source:e,sourcePosition:t=J.Bottom,target:n}){return t===J.Left||t===J.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1}}function fl(e,t){return Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2)}function pl({source:e,sourcePosition:t=J.Bottom,target:n,targetPosition:r=J.Top,center:i,offset:a}){let o=ul[t],s=ul[r],c={x:e.x+o.x*a,y:e.y+o.y*a},l={x:n.x+s.x*a,y:n.y+s.y*a},u=dl({source:c,sourcePosition:t,target:l}),d=u.x===0?`y`:`x`,f=u[d],p,m,h,g={x:0,y:0},_={x:0,y:0},[v,y,b,x]=rl({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(o[d]*s[d]===-1){m=i.x??v,h=i.y??y;let e=[{x:m,y:c.y},{x:m,y:l.y}],t=[{x:c.x,y:h},{x:l.x,y:h}];p=o[d]===f?d===`x`?e:t:d===`x`?t:e}else{let i=[{x:c.x,y:l.y}],u=[{x:l.x,y:c.y}];if(p=d===`x`?o.x===f?u:i:o.y===f?i:u,t===r){let t=Math.abs(e[d]-n[d]);if(t<=a){let r=Math.min(a-1,a-t);o[d]===f?g[d]=(c[d]>e[d]?-1:1)*r:_[d]=(l[d]>n[d]?-1:1)*r}}if(t!==r){let e=d===`x`?`y`:`x`,t=o[d]===s[e],n=c[e]>l[e],r=c[e]<l[e];(o[d]===1&&(!t&&n||t&&r)||o[d]!==1&&(!t&&r||t&&n))&&(p=d===`x`?i:u)}let v={x:c.x+g.x,y:c.y+g.y},y={x:l.x+_.x,y:l.y+_.y};Math.max(Math.abs(v.x-p[0].x),Math.abs(y.x-p[0].x))>=Math.max(Math.abs(v.y-p[0].y),Math.abs(y.y-p[0].y))?(m=(v.x+y.x)/2,h=p[0].y):(m=p[0].x,h=(v.y+y.y)/2)}return[[e,{x:c.x+g.x,y:c.y+g.y},...p,{x:l.x+_.x,y:l.y+_.y},n],m,h,b,x]}function ml(e,t,n,r){let i=Math.min(fl(e,t)/2,fl(t,n)/2,r),{x:a,y:o}=t;if(e.x===a&&a===n.x||e.y===o&&o===n.y)return`L${a} ${o}`;if(e.y===o){let t=e.x<n.x?-1:1,r=e.y<n.y?1:-1;return`L ${a+i*t},${o}Q ${a},${o} ${a},${o+i*r}`}let s=e.x<n.x?1:-1;return`L ${a},${o+i*(e.y<n.y?-1:1)}Q ${a},${o} ${a+i*s},${o}`}function hl(e){let{sourceX:t,sourceY:n,sourcePosition:r=J.Bottom,targetX:i,targetY:a,targetPosition:o=J.Top,borderRadius:s=5,centerX:c,centerY:l,offset:u=20}=e,[d,f,p,m,h]=pl({source:{x:t,y:n},sourcePosition:r,target:{x:i,y:a},targetPosition:o,center:{x:c,y:l},offset:u});return[d.reduce((e,t,n)=>{let r;return r=n>0&&n<d.length-1?ml(d[n-1],t,d[n+1],s):`${n===0?`M`:`L`}${t.x} ${t.y}`,e+=r,e},``),f,p,m,h]}function gl(e){let{sourceX:t,sourceY:n,targetX:r,targetY:i}=e,[a,o,s,c]=rl({sourceX:t,sourceY:n,targetX:r,targetY:i});return[`M ${t},${n}L ${r},${i}`,a,o,s,c]}var _l=V({name:`StraightEdge`,props:[`label`,`labelStyle`,`labelShowBg`,`labelBgStyle`,`labelBgPadding`,`labelBgBorderRadius`,`sourceY`,`sourceX`,`targetX`,`targetY`,`markerEnd`,`markerStart`,`interactionWidth`],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{let[n,r,i]=gl(e);return L(nl,{path:n,labelX:r,labelY:i,...t,...e})}}}),vl=V({name:`SmoothStepEdge`,props:[`sourcePosition`,`targetPosition`,`label`,`labelStyle`,`labelShowBg`,`labelBgStyle`,`labelBgPadding`,`labelBgBorderRadius`,`sourceY`,`sourceX`,`targetX`,`targetY`,`borderRadius`,`markerEnd`,`markerStart`,`interactionWidth`,`offset`],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{let[n,r,i]=hl({...e,sourcePosition:e.sourcePosition??J.Bottom,targetPosition:e.targetPosition??J.Top});return L(nl,{path:n,labelX:r,labelY:i,...t,...e})}}}),yl=V({name:`StepEdge`,props:[`sourcePosition`,`targetPosition`,`label`,`labelStyle`,`labelShowBg`,`labelBgStyle`,`labelBgPadding`,`labelBgBorderRadius`,`sourceY`,`sourceX`,`targetX`,`targetY`,`markerEnd`,`markerStart`,`interactionWidth`],setup(e,{attrs:t}){return()=>L(vl,{...e,...t,borderRadius:0})}}),bl=V({name:`BezierEdge`,props:[`sourcePosition`,`targetPosition`,`label`,`labelStyle`,`labelShowBg`,`labelBgStyle`,`labelBgPadding`,`labelBgBorderRadius`,`sourceY`,`sourceX`,`targetX`,`targetY`,`curvature`,`markerEnd`,`markerStart`,`interactionWidth`],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{let[n,r,i]=sl({...e,sourcePosition:e.sourcePosition??J.Bottom,targetPosition:e.targetPosition??J.Top});return L(nl,{path:n,labelX:r,labelY:i,...t,...e})}}}),xl=V({name:`SimpleBezierEdge`,props:[`sourcePosition`,`targetPosition`,`label`,`labelStyle`,`labelShowBg`,`labelBgStyle`,`labelBgPadding`,`labelBgBorderRadius`,`sourceY`,`sourceX`,`targetX`,`targetY`,`markerEnd`,`markerStart`,`interactionWidth`],compatConfig:{MODE:3},setup(e,{attrs:t}){return()=>{let[n,r,i]=ll({...e,sourcePosition:e.sourcePosition??J.Bottom,targetPosition:e.targetPosition??J.Top});return L(nl,{path:n,labelX:r,labelY:i,...t,...e})}}}),Sl={input:Yc,default:Gc,output:qc},Cl={default:bl,straight:_l,step:yl,smoothstep:vl,simplebezier:xl};function wl(e,t,n){let r=z(()=>e=>t.value.get(e)),i=z(()=>e=>n.value.get(e)),a=z(()=>{let t={...Cl,...e.edgeTypes},n=Object.keys(t);for(let r of e.edges)r.type&&!n.includes(r.type)&&(t[r.type]=r.type);return t}),o=z(()=>{let t={...Sl,...e.nodeTypes},n=Object.keys(t);for(let r of e.nodes)r.type&&!n.includes(r.type)&&(t[r.type]=r.type);return t}),s=z(()=>e.onlyRenderVisibleElements?ns(e.nodes,{x:0,y:0,width:e.dimensions.width,height:e.dimensions.height},e.viewport,!0):e.nodes),c=z(()=>{if(e.onlyRenderVisibleElements){let n=[];for(let r of e.edges){let i=t.value.get(r.source),a=t.value.get(r.target);Ms({sourcePos:i.computedPosition||{x:0,y:0},targetPos:a.computedPosition||{x:0,y:0},sourceWidth:i.dimensions.width,sourceHeight:i.dimensions.height,targetWidth:a.dimensions.width,targetHeight:a.dimensions.height,width:e.dimensions.width,height:e.dimensions.height,viewport:e.viewport})&&n.push(r)}return n}return e.edges}),l=z(()=>[...s.value,...c.value]),u=z(()=>{let t=[];for(let n of e.nodes)n.selected&&t.push(n);return t}),d=z(()=>{let t=[];for(let n of e.edges)n.selected&&t.push(n);return t}),f=z(()=>[...u.value,...d.value]),p=z(()=>{let t=[];for(let n of e.nodes)n.dimensions.width&&n.dimensions.height&&n.handleBounds!==void 0&&t.push(n);return t});return{getNode:r,getEdge:i,getElements:l,getEdgeTypes:a,getNodeTypes:o,getEdges:c,getNodes:s,getSelectedElements:f,getSelectedNodes:u,getSelectedEdges:d,getNodesInitialized:p,areNodesInitialized:z(()=>s.value.length>0&&p.value.length===s.value.length)}}var Tl=class e{constructor(){this.currentId=0,this.flows=new Map}static getInstance(){let t=N()?.appContext.app;return e.instance=t?.config.globalProperties.$vueFlowStorage??e.instance??new e,t&&(t.config.globalProperties.$vueFlowStorage=e.instance),e.instance}set(e,t){return this.flows.set(e,t)}get(e){return this.flows.get(e)}remove(e){return this.flows.delete(e)}create(e,t){let n=a(zc()),r={};for(let[e,t]of Object.entries(n.hooks)){let n=`on${e.charAt(0).toUpperCase()+e.slice(1)}`;r[n]=t.on}let i={};for(let[e,t]of Object.entries(n.hooks))i[e]=t.trigger;let o=z(()=>{let e=new Map;for(let t of n.nodes)e.set(t.id,t);return e}),s=z(()=>{let e=new Map;for(let t of n.edges)e.set(t.id,t);return e}),c=wl(n,o,s),l=Vc(n,o,s);l.setState({...n,...t});let u={...r,...c,...l,...pe(n),nodeLookup:o,edgeLookup:s,emits:i,id:e,vueFlowVersion:`1.47.0`,$destroy:()=>{this.remove(e)}};return this.set(e,u),u}getId(){return`vue-flow-${this.currentId++}`}};function $(t){let n=Tl.getInstance(),r=P(),a=typeof t==`object`,o=a?t:{id:t},s=o.id,c=s??r?.vueFlowId,l;if(r){let e=H(fc,null);e!=null&&(!c||e.id===c)&&(l=e)}if(l||c&&(l=n.get(c)),!l||c&&l.id!==c){let t=s??n.getId(),a=n.create(t,o);l=a,(r??e(!0)).run(()=>{i(a.applyDefault,(e,t,n)=>{let r=e=>{a.applyNodeChanges(e)},i=e=>{a.applyEdgeChanges(e)};e?(a.onNodesChange(r),a.onEdgesChange(i)):(a.hooks.value.nodesChange.off(r),a.hooks.value.edgesChange.off(i)),n(()=>{a.hooks.value.nodesChange.off(r),a.hooks.value.edgesChange.off(i)})},{immediate:!0}),te(()=>{if(l){let e=n.get(l.id);e?e.$destroy():$s(`No store instance found for id ${l.id} in storage.`)}})})}else a&&l.setState(o);return r&&(T(fc,l),r.vueFlowId=l.id),a&&N()?.type.name!==`VueFlow`&&l.emits.error(new Z(X.USEVUEFLOW_OPTIONS)),l}function El(e){let{emits:t,dimensions:n}=$(),r;I(()=>{let i=()=>{var r;if(!e.value||!((r=e.value).checkVisibility?.call(r)??!0))return;let i=Po(e.value);(i.width===0||i.height===0)&&t.error(new Z(X.MISSING_VIEWPORT_DIMENSIONS)),n.value={width:i.width||500,height:i.height||500}};i(),window.addEventListener(`resize`,i),e.value&&(r=new ResizeObserver(()=>i()),r.observe(e.value)),R(()=>{window.removeEventListener(`resize`,i),r&&e.value&&r.unobserve(e.value)})})}var Dl=V({name:`UserSelection`,compatConfig:{MODE:3},props:{userSelectionRect:{}},setup(e){return(e,t)=>(j(),w(`div`,{class:`vue-flow__selection vue-flow__container`,style:d({width:`${e.userSelectionRect.width}px`,height:`${e.userSelectionRect.height}px`,transform:`translate(${e.userSelectionRect.x}px, ${e.userSelectionRect.y}px)`})},null,4))}}),Ol=[`tabIndex`],kl=V({name:`NodesSelection`,compatConfig:{MODE:3},setup(e){let{emits:t,viewport:n,getSelectedNodes:r,noPanClassName:i,disableKeyboardA11y:a,userSelectionActive:o}=$(),s=Oc(),c=f(null),u=vc({el:c,onStart(e){t.selectionDragStart(e),t.nodeDragStart(e)},onDrag(e){t.selectionDrag(e),t.nodeDrag(e)},onStop(e){t.selectionDragStop(e),t.nodeDragStop(e)}});I(()=>{var e;a.value||(e=c.value)==null||e.focus({preventScroll:!0})});let p=z(()=>ts(r.value)),m=z(()=>({width:`${p.value.width}px`,height:`${p.value.height}px`,top:`${p.value.y}px`,left:`${p.value.x}px`}));function h(e){t.selectionContextMenu({event:e,nodes:r.value})}function g(e){a||jo[e.key]&&(e.preventDefault(),s({x:jo[e.key].x,y:jo[e.key].y},e.shiftKey))}return(e,t)=>!y(o)&&p.value.width&&p.value.height?(j(),w(`div`,{key:0,class:x([`vue-flow__nodesselection vue-flow__container`,y(i)]),style:d({transform:`translate(${y(n).x}px,${y(n).y}px) scale(${y(n).zoom})`})},[l(`div`,{ref_key:`el`,ref:c,class:x([{dragging:y(u)},`vue-flow__nodesselection-rect`]),style:d(m.value),tabIndex:y(a)?void 0:-1,onContextmenu:h,onKeydown:g},null,46,Ol)],6)):S(``,!0)}});function Al(e,t){return{x:e.clientX-t.left,y:e.clientY-t.top}}var jl=V({name:`Pane`,compatConfig:{MODE:3},props:{isSelecting:{type:Boolean},selectionKeyPressed:{type:Boolean}},setup(e){let{vueFlowRef:n,nodes:r,viewport:a,emits:o,userSelectionActive:s,removeSelectedElements:c,userSelectionRect:l,elementsSelectable:u,nodesSelectionActive:d,getSelectedEdges:p,getSelectedNodes:m,removeNodes:h,removeEdges:g,selectionMode:_,deleteKeyCode:v,multiSelectionKeyCode:b,multiSelectionActive:T,edgeLookup:E,nodeLookup:D,connectionLookup:O,defaultEdgeOptions:k,connectionStartHandle:A}=$(),M=f(null),N=f(new Set),P=f(new Set),F=f(),I=t(()=>u.value&&(e.isSelecting||s.value)),L=t(()=>A.value!==null),R=!1,z=!1,B=Eo(v,{actInsideInputWithModifier:!1}),V=Eo(b);i(B,e=>{e&&(h(m.value),g(p.value),d.value=!1)}),i(V,e=>{T.value=e});function H(e,t){return n=>{n.target===t&&e?.(n)}}function U(e){if(R||L.value){R=!1;return}o.paneClick(e),c(),d.value=!1}function W(e){e.preventDefault(),e.stopPropagation(),o.paneContextMenu(e)}function G(e){o.paneScroll(e)}function ee(t){var r,i;if(F.value=n.value?.getBoundingClientRect(),!u.value||!e.isSelecting||t.button!==0||t.target!==M.value||!F.value)return;(i=(r=t.target)?.setPointerCapture)==null||i.call(r,t.pointerId);let{x:a,y:s}=Al(t,F.value);z=!0,R=!1,c(),l.value={width:0,height:0,startX:a,startY:s,x:a,y:s},o.selectionStart(t)}function te(e){if(!F.value||!l.value)return;R=!0;let{x:t,y:n}=Ls(e,F.value),{startX:i=0,startY:c=0}=l.value,u={startX:i,startY:c,x:t<i?t:i,y:n<c?n:c,width:Math.abs(t-i),height:Math.abs(n-c)},f=N.value,p=P.value;N.value=new Set(ns(r.value,u,a.value,_.value===mo.Partial,!0).map(e=>e.id)),P.value=new Set;let m=k.value?.selectable??!0;for(let e of N.value){let t=O.value.get(e);if(t)for(let{edgeId:e}of t.values()){let t=E.value.get(e);t&&(t.selectable??m)&&P.value.add(e)}}if(!uc(f,N.value)){let e=bs(D.value,N.value,!0);o.nodesChange(e)}if(!uc(p,P.value)){let e=bs(E.value,P.value);o.edgesChange(e)}l.value=u,s.value=!0,d.value=!1}function q(t){var n;t.button!==0||!z||((n=t.target)==null||n.releasePointerCapture(t.pointerId),!s.value&&l.value&&t.target===M.value&&U(t),s.value=!1,l.value=null,d.value=N.value.size>0,o.selectionEnd(t),e.selectionKeyPressed&&(R=!1),z=!1)}return(e,t)=>(j(),w(`div`,{ref_key:`container`,ref:M,class:x([`vue-flow__pane vue-flow__container`,{selection:e.isSelecting}]),onClick:t[0]||=e=>I.value?void 0:H(U,M.value)(e),onContextmenu:t[1]||=e=>H(W,M.value)(e),onWheelPassive:t[2]||=e=>H(G,M.value)(e),onPointerenter:t[3]||=e=>I.value?void 0:y(o).paneMouseEnter(e),onPointerdown:t[4]||=e=>I.value?ee(e):y(o).paneMouseMove(e),onPointermove:t[5]||=e=>I.value?te(e):y(o).paneMouseMove(e),onPointerup:t[6]||=e=>I.value?q(e):void 0,onPointerleave:t[7]||=e=>y(o).paneMouseLeave(e)},[K(e.$slots,`default`),y(s)&&y(l)?(j(),C(Dl,{key:0,"user-selection-rect":y(l)},null,8,[`user-selection-rect`])):S(``,!0),y(d)&&y(m).length?(j(),C(kl,{key:1})):S(``,!0)],34))}}),Ml=V({name:`Transform`,compatConfig:{MODE:3},setup(e){let{viewport:t,fitViewOnInit:n,fitViewOnInitDone:r}=$(),i=z(()=>n.value?!r.value:!1),a=z(()=>`translate(${t.value.x}px,${t.value.y}px) scale(${t.value.zoom})`);return(e,t)=>(j(),w(`div`,{class:`vue-flow__transformationpane vue-flow__container`,style:d({transform:a.value,opacity:i.value?0:void 0})},[K(e.$slots,`default`)],4))}}),Nl=V({name:`Viewport`,compatConfig:{MODE:3},setup(e){let{minZoom:n,maxZoom:a,defaultViewport:o,translateExtent:s,zoomActivationKeyCode:c,selectionKeyCode:l,panActivationKeyCode:u,panOnScroll:d,panOnScrollMode:f,panOnScrollSpeed:p,panOnDrag:m,zoomOnDoubleClick:h,zoomOnPinch:g,zoomOnScroll:_,preventScrolling:v,noWheelClassName:b,noPanClassName:S,emits:C,connectionStartHandle:T,userSelectionActive:E,paneDragging:D,d3Zoom:O,d3Selection:k,d3ZoomHandler:A,viewport:M,viewportRef:N,paneClickDistance:P}=$();El(N);let F=ee(!1),L=ee(!1),R=null,z=!1,B=0,V={x:0,y:0,zoom:0},H=Eo(u),W=Eo(l),G=Eo(c),te=t(()=>(!W.value||W.value&&l.value===!0)&&(H.value||m.value)),q=t(()=>H.value||d.value),ne=t(()=>W.value||l.value===!0&&te.value!==!0),re=t(()=>T.value!==null);I(()=>{if(!N.value){$s(`Viewport element is missing`);return}let e=N.value,t=e.getBoundingClientRect(),r=po().clickDistance(P.value).scaleExtent([n.value,a.value]).translateExtent(s.value),c=kn(e).call(r),u=c.on(`wheel.zoom`),y=ro.translate(o.value.x??0,o.value.y??0).scale(Fo(o.value.zoom??1,n.value,a.value)),x=[[0,0],[t.width,t.height]],w=r.constrain()(y,x,s.value);r.transform(c,w),r.wheelDelta(ds),O.value=r,k.value=c,A.value=u,M.value={x:w.x,y:w.y,zoom:w.k},r.on(`start`,e=>{if(!e.sourceEvent)return null;B=e.sourceEvent.button,F.value=!0;let t=oe(e.transform);e.sourceEvent?.type===`mousedown`&&(D.value=!0),V=t,C.viewportChangeStart(t),C.moveStart({event:e,flowTransform:t})}),r.on(`end`,e=>{if(!e.sourceEvent)return null;if(F.value=!1,D.value=!1,ie(te.value,B??0)&&!z&&C.paneContextMenu(e.sourceEvent),z=!1,ae(V,e.transform)){let t=oe(e.transform);V=t,C.viewportChangeEnd(t),C.moveEnd({event:e,flowTransform:t})}}),r.filter(e=>{let t=G.value||_.value,n=g.value&&e.ctrlKey,r=e.button,i=e.type===`wheel`;if(r===1&&e.type===`mousedown`&&(se(e,`vue-flow__node`)||se(e,`vue-flow__edge`)))return!0;if(!te.value&&!t&&!q.value&&!h.value&&!g.value||E.value||re.value&&!i||!h.value&&e.type===`dblclick`||se(e,b.value)&&i||se(e,S.value)&&(!i||q.value&&i&&!G.value)||!g.value&&e.ctrlKey&&i||!t&&!q.value&&!n&&i)return!1;if(!g&&e.type===`touchstart`&&e.touches?.length>1)return e.preventDefault(),!1;if(!te.value&&(e.type===`mousedown`||e.type===`touchstart`)||l.value===!0&&Array.isArray(m.value)&&m.value.includes(0)&&r===0||Array.isArray(m.value)&&!m.value.includes(r)&&(e.type===`mousedown`||e.type===`touchstart`))return!1;let a=Array.isArray(m.value)&&m.value.includes(r)||l.value===!0&&Array.isArray(m.value)&&!m.value.includes(0)||!r||r<=1;return(!e.ctrlKey||H.value||i)&&a}),i([E,te],()=>{E.value&&!F.value?r.on(`zoom`,null):E.value||r.on(`zoom`,e=>{M.value={x:e.transform.x,y:e.transform.y,zoom:e.transform.k};let t=oe(e.transform);z=ie(te.value,B??0),C.viewportChange(t),C.move({event:e,flowTransform:t})})},{immediate:!0}),i([E,q,f,G,g,v,b],()=>{q.value&&!G.value&&!E.value?c.on(`wheel.zoom`,e=>{if(se(e,b.value))return!1;let t=G.value||_.value,n=g.value&&e.ctrlKey;if(!(!v.value||q.value||t||n))return!1;e.preventDefault(),e.stopImmediatePropagation();let i=c.property(`__zoom`).k||1,a=Rs();if(!H.value&&e.ctrlKey&&g.value&&a){let t=jn(e),n=i*2**ds(e);r.scaleTo(c,n,t,e);return}let o=e.deltaMode===1?20:1,s=f.value===vo.Vertical?0:e.deltaX*o,l=f.value===vo.Horizontal?0:e.deltaY*o;!a&&e.shiftKey&&f.value!==vo.Vertical&&!s&&l&&(s=l,l=0),r.translateBy(c,-(s/i)*p.value,-(l/i)*p.value);let u=oe(c.property(`__zoom`));R&&clearTimeout(R),L.value?(C.move({event:e,flowTransform:u}),C.viewportChange(u),R=setTimeout(()=>{C.moveEnd({event:e,flowTransform:u}),C.viewportChangeEnd(u),L.value=!1},150)):(L.value=!0,C.moveStart({event:e,flowTransform:u}),C.viewportChangeStart(u))},{passive:!1}):u!==void 0&&c.on(`wheel.zoom`,function(e,t){let n=!v.value&&e.type===`wheel`&&!e.ctrlKey,r=G.value||_.value,i=g.value&&e.ctrlKey;if(!r&&!d.value&&!i&&e.type===`wheel`||n||se(e,b.value))return null;e.preventDefault(),u.call(this,e,t)},{passive:!1})},{immediate:!0})});function ie(e,t){return t===2&&Array.isArray(e)&&e.includes(2)}function ae(e,t){return e.x!==t.x&&!Number.isNaN(t.x)||e.y!==t.y&&!Number.isNaN(t.y)||e.zoom!==t.k&&!Number.isNaN(t.k)}function oe(e){return{x:e.x,y:e.y,zoom:e.k}}function se(e,t){return e.target.closest(`.${t}`)}return(e,t)=>(j(),w(`div`,{ref_key:`viewportRef`,ref:N,class:`vue-flow__viewport vue-flow__container`},[U(jl,{"is-selecting":ne.value,"selection-key-pressed":y(W),class:x({connecting:re.value,dragging:y(D),draggable:y(m)===!0||Array.isArray(y(m))&&y(m).includes(0)})},{default:r(()=>[U(Ml,null,{default:r(()=>[K(e.$slots,`default`)]),_:3})]),_:3},8,[`is-selecting`,`selection-key-pressed`,`class`])],512))}}),Pl=[`id`],Fl=[`id`],Il=[`id`],Ll=V({name:`A11yDescriptions`,compatConfig:{MODE:3},setup(e){let{id:t,disableKeyboardA11y:n,ariaLiveMessage:r}=$();return(e,i)=>(j(),w(o,null,[l(`div`,{id:`${y(Do)}-${y(t)}`,style:{display:`none`}},` Press enter or space to select a node. `+B(y(n)?``:`You can then use the arrow keys to move the node around.`)+` You can then use the arrow keys to move the node around, press delete to remove it and press escape to cancel. `,9,Pl),l(`div`,{id:`${y(Oo)}-${y(t)}`,style:{display:`none`}},` Press enter or space to select an edge. You can then press delete to remove it or press escape to cancel. `,8,Fl),y(n)?S(``,!0):(j(),w(`div`,{key:0,id:`${y(ko)}-${y(t)}`,"aria-live":`assertive`,"aria-atomic":`true`,style:{position:`absolute`,width:`1px`,height:`1px`,margin:`-1px`,border:`0`,padding:`0`,overflow:`hidden`,clip:`rect(0px, 0px, 0px, 0px)`,"clip-path":`inset(100%)`}},B(y(r)),9,Il))],64))}});function Rl(){let e=$();i(()=>e.viewportHelper.value.viewportInitialized,t=>{t&&setTimeout(()=>{e.emits.init(e),e.emits.paneReady(e)},1)})}function zl(e,t,n){return n===J.Left?e-t:n===J.Right?e+t:e}function Bl(e,t,n){return n===J.Top?e-t:n===J.Bottom?e+t:e}var Vl=function({radius:e=10,centerX:t=0,centerY:n=0,position:r=J.Top,type:i}){return L(`circle`,{class:`vue-flow__edgeupdater vue-flow__edgeupdater-${i}`,cx:zl(t,e,r),cy:Bl(n,e,r),r:e,stroke:`transparent`,fill:`transparent`})};Vl.props=[`radius`,`centerX`,`centerY`,`position`,`type`],Vl.compatConfig={MODE:3};var Hl=Vl,Ul=V({name:`Edge`,compatConfig:{MODE:3},props:[`id`],setup(e){let{id:n,addSelectedEdges:r,connectionMode:i,edgeUpdaterRadius:a,emits:o,nodesSelectionActive:s,noPanClassName:c,getEdgeTypes:l,removeSelectedEdges:u,findEdge:d,findNode:p,isValidConnection:m,multiSelectionActive:h,disableKeyboardA11y:g,elementsSelectable:_,edgesUpdatable:v,edgesFocusable:y,hooks:b}=$(),x=z(()=>d(e.id)),{emit:S,on:C}=bc(x.value,o),w=H(_c),D=N(),O=f(!1),k=f(!1),A=f(``),j=f(null),M=f(`source`),P=f(null),F=t(()=>x.value.selectable===void 0?_.value:x.value.selectable),I=t(()=>x.value.updatable===void 0?v.value:x.value.updatable),R=t(()=>x.value.focusable===void 0?y.value:x.value.focusable);T(hc,e.id),T(gc,P);let B=z(()=>x.value.class instanceof Function?x.value.class(x.value):x.value.class),V=z(()=>x.value.style instanceof Function?x.value.style(x.value):x.value.style),U=z(()=>{let e=x.value.type||`default`,t=w?.[`edge-${e}`];if(t)return t;let n=x.value.template??l.value[e];if(typeof n==`string`&&D){let t=Object.keys(D.appContext.components);t&&t.includes(e)&&(n=E(e,!1))}return n&&typeof n!=`string`?n:(o.error(new Z(X.EDGE_TYPE_MISSING,n)),!1)}),{handlePointerDown:W}=Cc({nodeId:A,handleId:j,type:M,isValidConnection:m,edgeUpdaterType:M,onEdgeUpdate:ee,onEdgeUpdateEnd:te});return()=>{let t=p(x.value.source),r=p(x.value.target),s=`pathOptions`in x.value?x.value.pathOptions:{};if(!t&&!r)return o.error(new Z(X.EDGE_SOURCE_TARGET_MISSING,x.value.id,x.value.source,x.value.target)),null;if(!t)return o.error(new Z(X.EDGE_SOURCE_MISSING,x.value.id,x.value.source)),null;if(!r)return o.error(new Z(X.EDGE_TARGET_MISSING,x.value.id,x.value.target)),null;if(!x.value||x.value.hidden||t.hidden||r.hidden)return null;let u;u=i.value===go.Strict?t.handleBounds.source:[...t.handleBounds.source||[],...t.handleBounds.target||[]];let d=js(u,x.value.sourceHandle),f;f=i.value===go.Strict?r.handleBounds.target:[...r.handleBounds.target||[],...r.handleBounds.source||[]];let m=js(f,x.value.targetHandle),h=d?.position||J.Bottom,g=m?.position||J.Top,{x:_,y:v}=As(t,d,h),{x:y,y:S}=As(r,m,g);return x.value.sourceX=_,x.value.sourceY=v,x.value.targetX=y,x.value.targetY=S,L(`g`,{ref:P,key:e.id,"data-id":e.id,class:[`vue-flow__edge`,`vue-flow__edge-${U.value===!1?`default`:x.value.type||`default`}`,c.value,B.value,{updating:O.value,selected:x.value.selected,animated:x.value.animated,inactive:!F.value&&!b.value.edgeClick.hasListeners()}],tabIndex:R.value?0:void 0,"aria-label":x.value.ariaLabel===null?void 0:x.value.ariaLabel??`Edge from ${x.value.source} to ${x.value.target}`,"aria-describedby":R.value?`${Oo}-${n}`:void 0,"aria-roledescription":`edge`,role:R.value?`group`:`img`,...x.value.domAttributes,onClick:ne,onContextmenu:re,onDblclick:ie,onMouseenter:ae,onMousemove:oe,onMouseleave:se,onKeyDown:R.value?ue:void 0},[k.value?null:L(U.value===!1?l.value.default:U.value,{id:e.id,sourceNode:t,targetNode:r,source:x.value.source,target:x.value.target,type:x.value.type,updatable:I.value,selected:x.value.selected,animated:x.value.animated,label:x.value.label,labelStyle:x.value.labelStyle,labelShowBg:x.value.labelShowBg,labelBgStyle:x.value.labelBgStyle,labelBgPadding:x.value.labelBgPadding,labelBgBorderRadius:x.value.labelBgBorderRadius,data:x.value.data,events:{...x.value.events,...C},style:V.value,markerStart:`url('#${us(x.value.markerStart,n)}')`,markerEnd:`url('#${us(x.value.markerEnd,n)}')`,sourcePosition:h,targetPosition:g,sourceX:_,sourceY:v,targetX:y,targetY:S,sourceHandleId:x.value.sourceHandle,targetHandleId:x.value.targetHandle,interactionWidth:x.value.interactionWidth,...s}),[I.value===`source`||I.value===!0?[L(`g`,{onMousedown:ce,onMouseenter:G,onMouseout:K},L(Hl,{position:h,centerX:_,centerY:v,radius:a.value,type:`source`,"data-type":`source`}))]:null,I.value===`target`||I.value===!0?[L(`g`,{onMousedown:le,onMouseenter:G,onMouseout:K},L(Hl,{position:g,centerX:y,centerY:S,radius:a.value,type:`target`,"data-type":`target`}))]:null]])};function G(){O.value=!0}function K(){O.value=!1}function ee(e,t){S.update({event:e,edge:x.value,connection:t})}function te(e){S.updateEnd({event:e,edge:x.value}),k.value=!1}function q(e,t){e.button===0&&(k.value=!0,A.value=t?x.value.target:x.value.source,j.value=(t?x.value.targetHandle:x.value.sourceHandle)??null,M.value=t?`target`:`source`,S.updateStart({event:e,edge:x.value}),W(e))}function ne(e){var t;let n={event:e,edge:x.value};F.value&&(s.value=!1,x.value.selected&&h.value?(u([x.value]),(t=P.value)==null||t.blur()):r([x.value])),S.click(n)}function re(e){S.contextMenu({event:e,edge:x.value})}function ie(e){S.doubleClick({event:e,edge:x.value})}function ae(e){S.mouseEnter({event:e,edge:x.value})}function oe(e){S.mouseMove({event:e,edge:x.value})}function se(e){S.mouseLeave({event:e,edge:x.value})}function ce(e){q(e,!0)}function le(e){q(e,!1)}function ue(t){var n;!g.value&&Ao.includes(t.key)&&F.value&&(t.key===`Escape`?((n=P.value)==null||n.blur(),u([d(e.id)])):r([d(e.id)]))}}}),Wl=V({name:`ConnectionLine`,compatConfig:{MODE:3},setup(){let{id:e,connectionMode:t,connectionStartHandle:n,connectionEndHandle:r,connectionPosition:i,connectionLineType:a,connectionLineStyle:o,connectionLineOptions:s,connectionStatus:c,viewport:l,findNode:u}=$(),d=H(_c)?.[`connection-line`],f=z(()=>u(n.value?.nodeId)),p=z(()=>u(r.value?.nodeId)??null),m=z(()=>({x:(i.value.x-l.value.x)/l.value.zoom,y:(i.value.y-l.value.y)/l.value.zoom})),h=z(()=>s.value.markerStart?`url(#${us(s.value.markerStart,e)})`:``),g=z(()=>s.value.markerEnd?`url(#${us(s.value.markerEnd,e)})`:``);return()=>{if(!f.value||!n.value)return null;let e=n.value.id,i=n.value.type,l=f.value.handleBounds,u=l?.[i]??[];if(t.value===go.Loose){let e=l?.[i===`source`?`target`:`source`]??[];u=[...u,...e]}if(!u)return null;let _=(e?u.find(t=>t.id===e):u[0])??null,v=_?.position??J.Top,{x:y,y:b}=As(f.value,_,v),x=null;p.value&&(x=t.value===go.Strict?p.value.handleBounds[i===`source`?`target`:`source`]?.find(e=>e.id===r.value?.id)||null:[...p.value.handleBounds.source??[],...p.value.handleBounds.target??[]]?.find(e=>e.id===r.value?.id)||null);let S=r.value?.position??(v?Zs[v]:null);if(!v||!S)return null;let C=a.value??s.value.type??ho.Bezier,w=``,T={sourceX:y,sourceY:b,sourcePosition:v,targetX:m.value.x,targetY:m.value.y,targetPosition:S};return C===ho.Bezier?[w]=sl(T):C===ho.Step?[w]=hl({...T,borderRadius:0}):C===ho.SmoothStep?[w]=hl(T):C===ho.SimpleBezier?[w]=ll(T):w=`M${y},${b} ${m.value.x},${m.value.y}`,L(`svg`,{class:`vue-flow__edges vue-flow__connectionline vue-flow__container`},L(`g`,{class:`vue-flow__connection`},d?L(d,{sourceX:y,sourceY:b,sourcePosition:v,targetX:m.value.x,targetY:m.value.y,targetPosition:S,sourceNode:f.value,sourceHandle:_,targetNode:p.value,targetHandle:x,markerEnd:g.value,markerStart:h.value,connectionStatus:c.value}):L(`path`,{d:w,class:[s.value.class,c.value,`vue-flow__connection-path`],style:{...o.value,...s.value.style},"marker-end":g.value,"marker-start":h.value})))}}}),Gl=[`id`,`markerWidth`,`markerHeight`,`markerUnits`,`orient`],Kl=V({name:`MarkerType`,compatConfig:{MODE:3},props:{id:{},type:{},color:{default:`none`},width:{default:12.5},height:{default:12.5},markerUnits:{default:`strokeWidth`},orient:{default:`auto-start-reverse`},strokeWidth:{default:1}},setup(e){return(e,t)=>(j(),w(`marker`,{id:e.id,class:`vue-flow__arrowhead`,viewBox:`-10 -10 20 20`,refX:`0`,refY:`0`,markerWidth:`${e.width}`,markerHeight:`${e.height}`,markerUnits:e.markerUnits,orient:e.orient},[e.type===y(_o).ArrowClosed?(j(),w(`polyline`,{key:0,style:d({stroke:e.color,fill:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":`round`,"stroke-linejoin":`round`,points:`-5,-4 0,0 -5,4 -5,-4`},null,4)):S(``,!0),e.type===y(_o).Arrow?(j(),w(`polyline`,{key:1,style:d({stroke:e.color,strokeWidth:e.strokeWidth}),"stroke-linecap":`round`,"stroke-linejoin":`round`,fill:`none`,points:`-5,-4 0,0 -5,4`},null,4)):S(``,!0)],8,Gl))}}),ql={class:`vue-flow__marker vue-flow__container`,"aria-hidden":`true`},Jl=V({name:`MarkerDefinitions`,compatConfig:{MODE:3},setup(e){let{id:t,edges:n,connectionLineOptions:r,defaultMarkerColor:i}=$(),a=z(()=>{let e=new Set,a=[],o=n=>{if(n){let r=us(n,t);e.has(r)||(typeof n==`object`?a.push({...n,id:r,color:n.color||i.value}):a.push({id:r,color:i.value,type:n}),e.add(r))}};for(let e of[r.value.markerEnd,r.value.markerStart])o(e);for(let e of n.value)for(let t of[e.markerStart,e.markerEnd])o(t);return a.sort((e,t)=>e.id.localeCompare(t.id))});return(e,t)=>(j(),w(`svg`,ql,[l(`defs`,null,[(j(!0),w(o,null,G(a.value,e=>(j(),C(Kl,{id:e.id,key:e.id,type:e.type,color:e.color,width:e.width,height:e.height,markerUnits:e.markerUnits,"stroke-width":e.strokeWidth,orient:e.orient},null,8,[`id`,`type`,`color`,`width`,`height`,`markerUnits`,`stroke-width`,`orient`]))),128))])]))}}),Yl=V({name:`Edges`,compatConfig:{MODE:3},setup(e){let{findNode:t,getEdges:n,elevateEdgesOnSelect:r}=$();return(e,i)=>(j(),w(o,null,[U(Jl),(j(!0),w(o,null,G(y(n),e=>(j(),w(`svg`,{key:e.id,class:`vue-flow__edges vue-flow__container`,style:d({zIndex:y(Ns)(e,y(t),y(r))})},[U(y(Ul),{id:e.id},null,8,[`id`])],4))),128)),U(y(Wl))],64))}}),Xl=V({name:`Node`,compatConfig:{MODE:3},props:[`id`,`resizeObserver`],setup(e){let{id:n,noPanClassName:r,selectNodesOnDrag:a,nodesSelectionActive:o,multiSelectionActive:s,emits:c,removeSelectedNodes:l,addSelectedNodes:u,updateNodeDimensions:d,onUpdateNodeInternals:p,getNodeTypes:m,nodeExtent:h,elevateNodesOnSelect:g,disableKeyboardA11y:_,ariaLiveMessage:v,snapToGrid:y,snapGrid:b,nodeDragThreshold:x,nodesDraggable:S,elementsSelectable:C,nodesConnectable:w,nodesFocusable:D,hooks:k}=$(),A=f(null);T(mc,A),T(pc,e.id);let j=H(_c),M=N(),P=Oc(),{node:F,parentNode:R}=Tc(e.id),{emit:B,on:V}=Dc(F,c),U=t(()=>F.draggable===void 0?S.value:F.draggable),W=t(()=>F.selectable===void 0?C.value:F.selectable),G=t(()=>F.connectable===void 0?w.value:F.connectable),K=t(()=>F.focusable===void 0?D.value:F.focusable),ee=z(()=>W.value||U.value||k.value.nodeClick.hasListeners()||k.value.nodeDoubleClick.hasListeners()||k.value.nodeMouseEnter.hasListeners()||k.value.nodeMouseMove.hasListeners()||k.value.nodeMouseLeave.hasListeners()),te=t(()=>!!F.dimensions.width&&!!F.dimensions.height),q=z(()=>{let e=F.type||`default`,t=j?.[`node-${e}`];if(t)return t;let n=F.template||m.value[e];if(typeof n==`string`&&M){let t=Object.keys(M.appContext.components);t&&t.includes(e)&&(n=E(e,!1))}return n&&typeof n!=`string`?n:(c.error(new Z(X.NODE_TYPE_MISSING,n)),!1)}),ne=vc({id:e.id,el:A,disabled:()=>!U.value,selectable:W,dragHandle:()=>F.dragHandle,onStart(e){B.dragStart(e)},onDrag(e){B.drag(e)},onStop(e){B.dragStop(e)},onClick(e){pe(e)}}),re=z(()=>F.class instanceof Function?F.class(F):F.class),ie=z(()=>{let e=(F.style instanceof Function?F.style(F):F.style)||{},t=F.width instanceof Function?F.width(F):F.width,n=F.height instanceof Function?F.height(F):F.height;return!e.width&&t&&(e.width=typeof t==`string`?t:`${t}px`),!e.height&&n&&(e.height=typeof n==`string`?n:`${n}px`),e}),ae=t(()=>Number(F.zIndex??ie.value.zIndex??0));return p(t=>{(t.includes(e.id)||!t.length)&&se()}),I(()=>{i(()=>F.hidden,(t=!1,n,r)=>{!t&&A.value&&(e.resizeObserver.observe(A.value),r(()=>{A.value&&e.resizeObserver.unobserve(A.value)}))},{immediate:!0,flush:`post`})}),i([()=>F.type,()=>F.sourcePosition,()=>F.targetPosition],()=>{O(()=>{d([{id:e.id,nodeElement:A.value,forceUpdate:!0}])})}),i([()=>F.position.x,()=>F.position.y,()=>R.value?.computedPosition.x,()=>R.value?.computedPosition.y,()=>R.value?.computedPosition.z,ae,()=>F.selected,()=>F.dimensions.height,()=>F.dimensions.width,()=>R.value?.dimensions.height,()=>R.value?.dimensions.width],([e,t,n,r,i,a])=>{let o={x:e,y:t,z:a+(g.value&&F.selected?1e3:0)};n!==void 0&&r!==void 0?F.computedPosition=cs({x:n,y:r,z:i},o):F.computedPosition=o},{flush:`post`,immediate:!0}),i([()=>F.extent,h],([e,t],[n,r])=>{(e!==n||t!==r)&&oe()}),F.extent===`parent`||typeof F.extent==`object`&&`range`in F.extent&&F.extent.range===`parent`?he(()=>te).toBe(!0).then(oe):oe(),()=>F.hidden?null:L(`div`,{ref:A,"data-id":F.id,class:[`vue-flow__node`,`vue-flow__node-${q.value===!1?`default`:F.type||`default`}`,{[r.value]:U.value,dragging:ne?.value,draggable:U.value,selected:F.selected,selectable:W.value,parent:F.isParent},re.value],style:{visibility:te.value?`visible`:`hidden`,zIndex:F.computedPosition.z??ae.value,transform:`translate(${F.computedPosition.x}px,${F.computedPosition.y}px)`,pointerEvents:ee.value?`all`:`none`,...ie.value},tabIndex:K.value?0:void 0,role:K.value?`group`:void 0,"aria-describedby":_.value?void 0:`${Do}-${n}`,"aria-label":F.ariaLabel,"aria-roledescription":`node`,...F.domAttributes,onMouseenter:ce,onMousemove:le,onMouseleave:ue,onContextmenu:de,onClick:pe,onDblclick:fe,onKeydown:me},[L(q.value===!1?m.value.default:q.value,{id:F.id,type:F.type,data:F.data,events:{...F.events,...V},selected:F.selected,resizing:F.resizing,dragging:ne.value,connectable:G.value,position:F.computedPosition,dimensions:F.dimensions,isValidTargetPos:F.isValidTargetPos,isValidSourcePos:F.isValidSourcePos,parent:F.parentNode,parentNodeId:F.parentNode,zIndex:F.computedPosition.z??ae.value,targetPosition:F.targetPosition,sourcePosition:F.sourcePosition,label:F.label,dragHandle:F.dragHandle,onUpdateNodeInternals:se})]);function oe(){let e=F.computedPosition,{computedPosition:t,position:n}=ks(F,y.value?Bs(e,b.value):e,c.error,h.value,R.value);(F.computedPosition.x!==t.x||F.computedPosition.y!==t.y)&&(F.computedPosition={...F.computedPosition,...t}),(F.position.x!==n.x||F.position.y!==n.y)&&(F.position=n)}function se(){A.value&&d([{id:e.id,nodeElement:A.value,forceUpdate:!0}])}function ce(e){ne?.value||B.mouseEnter({event:e,node:F})}function le(e){ne?.value||B.mouseMove({event:e,node:F})}function ue(e){ne?.value||B.mouseLeave({event:e,node:F})}function de(e){return B.contextMenu({event:e,node:F})}function fe(e){return B.doubleClick({event:e,node:F})}function pe(e){W.value&&(!a.value||!U.value||x.value>0)&&nc(F,s.value,u,l,o,!1,A.value),B.click({event:e,node:F})}function me(e){if(!(xo(e)||_.value))if(Ao.includes(e.key)&&W.value){let t=e.key===`Escape`;nc(F,s.value,u,l,o,t,A.value)}else U.value&&F.selected&&jo[e.key]&&(e.preventDefault(),v.value=`Moved selected node ${e.key.replace(`Arrow`,``).toLowerCase()}. New position, x: ${~~F.position.x}, y: ${~~F.position.y}`,P({x:jo[e.key].x,y:jo[e.key].y},e.shiftKey))}}}),Zl={height:`0`,width:`0`},Ql=V({name:`EdgeLabelRenderer`,compatConfig:{MODE:3},setup(e){let{viewportRef:n}=$(),r=t(()=>n.value?.getElementsByClassName(`vue-flow__edge-labels`)[0]);return(e,t)=>(j(),w(`svg`,null,[(j(),w(`foreignObject`,Zl,[(j(),C(u,{to:r.value,disabled:!r.value},[K(e.$slots,`default`)],8,[`to`,`disabled`]))]))]))}});function $l(e={includeHiddenNodes:!1}){let{nodes:t}=$();return z(()=>{if(t.value.length===0)return!1;for(let n of t.value)if((e.includeHiddenNodes||!n.hidden)&&(n?.handleBounds===void 0||n.dimensions.width===0||n.dimensions.height===0))return!1;return!0})}var eu={class:`vue-flow__nodes vue-flow__container`},tu=V({name:`Nodes`,compatConfig:{MODE:3},setup(e){let{getNodes:t,updateNodeDimensions:n,emits:r}=$(),a=$l(),s=f();return i(a,e=>{e&&O(()=>{r.nodesInitialized(t.value)})},{immediate:!0}),I(()=>{s.value=new ResizeObserver(e=>{let t=e.map(e=>({id:e.target.getAttribute(`data-id`),nodeElement:e.target,forceUpdate:!0}));O(()=>n(t))})}),R(()=>s.value?.disconnect()),(e,n)=>(j(),w(`div`,eu,[s.value?(j(!0),w(o,{key:0},G(y(t),(e,t,n,r)=>{let i=[e.id];if(r&&r.key===e.id&&D(r,i))return r;let a=(j(),C(y(Xl),{id:e.id,key:e.id,"resize-observer":s.value},null,8,[`id`,`resize-observer`]));return a.memo=i,a},n,0),128)):S(``,!0)]))}});function nu(){let{emits:e}=$();I(()=>{if(ec()){let t=document.querySelector(`.vue-flow__pane`);t&&window.getComputedStyle(t).zIndex!==`1`&&e.error(new Z(X.MISSING_STYLES))}})}var ru=l(`div`,{class:`vue-flow__edge-labels`},null,-1),iu=V({name:`VueFlow`,compatConfig:{MODE:3},props:{id:{},modelValue:{},nodes:{},edges:{},edgeTypes:{},nodeTypes:{},connectionMode:{},connectionLineType:{},connectionLineStyle:{default:void 0},connectionLineOptions:{default:void 0},connectionRadius:{},isValidConnection:{type:[Function,null],default:void 0},deleteKeyCode:{default:void 0},selectionKeyCode:{type:[Boolean,null],default:void 0},multiSelectionKeyCode:{default:void 0},zoomActivationKeyCode:{default:void 0},panActivationKeyCode:{default:void 0},snapToGrid:{type:Boolean,default:void 0},snapGrid:{},onlyRenderVisibleElements:{type:Boolean,default:void 0},edgesUpdatable:{type:[Boolean,String],default:void 0},nodesDraggable:{type:Boolean,default:void 0},nodesConnectable:{type:Boolean,default:void 0},nodeDragThreshold:{},elementsSelectable:{type:Boolean,default:void 0},selectNodesOnDrag:{type:Boolean,default:void 0},panOnDrag:{type:[Boolean,Array],default:void 0},minZoom:{},maxZoom:{},defaultViewport:{},translateExtent:{},nodeExtent:{},defaultMarkerColor:{},zoomOnScroll:{type:Boolean,default:void 0},zoomOnPinch:{type:Boolean,default:void 0},panOnScroll:{type:Boolean,default:void 0},panOnScrollSpeed:{},panOnScrollMode:{},paneClickDistance:{},zoomOnDoubleClick:{type:Boolean,default:void 0},preventScrolling:{type:Boolean,default:void 0},selectionMode:{},edgeUpdaterRadius:{},fitViewOnInit:{type:Boolean,default:void 0},connectOnClick:{type:Boolean,default:void 0},applyDefault:{type:Boolean,default:void 0},autoConnect:{type:[Boolean,Function],default:void 0},noDragClassName:{},noWheelClassName:{},noPanClassName:{},defaultEdgeOptions:{},elevateEdgesOnSelect:{type:Boolean,default:void 0},elevateNodesOnSelect:{type:Boolean,default:void 0},disableKeyboardA11y:{type:Boolean,default:void 0},edgesFocusable:{type:Boolean,default:void 0},nodesFocusable:{type:Boolean,default:void 0},autoPanOnConnect:{type:Boolean,default:void 0},autoPanOnNodeDrag:{type:Boolean,default:void 0},autoPanSpeed:{}},emits:`nodesChange.edgesChange.nodesInitialized.paneReady.init.updateNodeInternals.error.connect.connectStart.connectEnd.clickConnectStart.clickConnectEnd.moveStart.move.moveEnd.selectionDragStart.selectionDrag.selectionDragStop.selectionContextMenu.selectionStart.selectionEnd.viewportChangeStart.viewportChange.viewportChangeEnd.paneScroll.paneClick.paneContextMenu.paneMouseEnter.paneMouseMove.paneMouseLeave.edgeUpdate.edgeContextMenu.edgeMouseEnter.edgeMouseMove.edgeMouseLeave.edgeDoubleClick.edgeClick.edgeUpdateStart.edgeUpdateEnd.nodeContextMenu.nodeMouseEnter.nodeMouseMove.nodeMouseLeave.nodeDoubleClick.nodeClick.nodeDragStart.nodeDrag.nodeDragStop.miniMapNodeClick.miniMapNodeDoubleClick.miniMapNodeMouseEnter.miniMapNodeMouseMove.miniMapNodeMouseLeave.update:modelValue.update:nodes.update:edges`.split(`.`),setup(e,{expose:t,emit:n}){let i=e,a=v(),o=Se(i,`modelValue`,n),s=Se(i,`nodes`,n),c=Se(i,`edges`,n),l=$(i),u=Fc({modelValue:o,nodes:s,edges:c},i,l);return Lc(n,l.hooks),Rl(),nu(),T(_c,a),M(u),t(l),(e,t)=>(j(),w(`div`,{ref:y(l).vueFlowRef,class:`vue-flow`},[U(Nl,null,{default:r(()=>[U(Yl),ru,U(tu),K(e.$slots,`zoom-pane`)]),_:3}),K(e.$slots,`default`),U(Ll)],512))}});function au(e={}){let{handleType:t,handleId:n,nodeId:r,onConnect:a,onDisconnect:o}=e,{connectionLookup:c}=$(),l=wc(),u=f(null),d=f(),p=z(()=>{let e=s(r)??l,i=s(t),a=s(n),o=``;return i&&(o=a?`-${i}-${a}`:`-${i}`),`${e}${o}`});return i(()=>c.value.get(p.value),e=>{lc(d.value,e)||(d.value=e)},{immediate:!0}),i([d,()=>a!==void 0,()=>o!==void 0],([e=new Map])=>{u.value&&u.value!==e&&(cc(u.value,e,o),cc(e,u.value,a)),u.value=e},{immediate:!0}),z(()=>d.value?Array.from(d.value.values()):[])}function ou(e){let{findNode:t}=$();return z({get(){let n=s(e);if(!Array.isArray(n)){let e=t(n);return e?{id:e.id,type:e.type,data:e.data}:null}let r=[];for(let e of n){let n=t(e);n&&r.push({id:n.id,type:n.type,data:n.data})}return r},set(){$s(`You are trying to set node data via useNodesData. This is not supported.`)}})}export{nl as a,au as c,Ql as i,ou as l,J as n,Uc as o,iu as r,hl as s,go as t,$ as u};